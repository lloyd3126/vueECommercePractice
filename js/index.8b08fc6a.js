(function(t){function e(e){for(var s,i,n=e[0],c=e[1],l=e[2],u=0,p=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,n=1;n<a.length;n++){var c=a[n];0!==r[c]&&(s=!1)}s&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},r={index:0},o=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/vueECommercePractice/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0d76":function(t,e,a){},"1b40":function(t,e,a){"use strict";var s=a("37a0"),r=a.n(s);r.a},"1e4b":function(t,e,a){"use strict";var s=a("82d6"),r=a.n(s);r.a},"24b0":function(t,e,a){"use strict";var s=a("f919"),r=a.n(s);r.a},3381:function(t,e,a){},"33d7":function(t,e,a){},"36c4":function(t,e,a){"use strict";var s=a("4965"),r=a.n(s);r.a},"37a0":function(t,e,a){},"48c8":function(t,e,a){"use strict";var s=a("b485"),r=a.n(s);r.a},4965:function(t,e,a){},5155:function(t,e,a){"use strict";var s=a("0d76"),r=a.n(s);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("4de4");var s,r=a("5530"),o=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("2b0e")),i=a("bc3a"),n=a.n(i),c=a("a7fe"),l=a.n(c),d=a("9062"),u=a.n(d),p=(a("e40d"),a("4989"),a("7bb1")),m=a("4c93"),v=a("60d4"),g=a("4ae6"),f=a.n(g),h=a("9c39"),b=a.n(h),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}},[a("router-view")],1)])},_=[],y={name:"App"},x=y,k=(a("5c0b"),a("2877")),P=Object(k["a"])(x,C,_,!1,null,null,null),w=P.exports,$=a("8c4f"),L=a("5f35"),I=a.n(L),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("MainNavbar"),a("form",{staticClass:"form-signin mt-5",on:{submit:function(e){return e.preventDefault(),t.signin(e)}}},[a("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("請先登入")]),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("電子郵件")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"電子郵件",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"密碼",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._m(0),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v(" 登入 ")]),a("p",{staticClass:"mt-5 mb-3 text-muted"},[t._v("© 2020")])])],1)},M=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkbox mb-3"},[a("label",[a("input",{attrs:{type:"checkbox",value:"remember-me"}}),t._v(" 記住我 ")])])}],j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light shadow-sm"},[a("div",{staticClass:"container"},[a("a",{staticClass:"text-dark d-flex align-items-center",attrs:{href:t.publicPath+"#/"}},[a("img",{staticClass:"mr-2",attrs:{src:t.publicPath+"img/logo.png",alt:"",srcset:"",width:"158"}})]),t._m(0),a("div",{staticClass:"collapse navbar-collapse justify-content-end order-3 order-md-1",attrs:{id:"MainNavbarContent"}},[a("ul",{staticClass:"navbar-nav"},[a("li",{staticClass:"nav-item"},["/"!==t.$route.path?a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link ",attrs:{href:t.publicPath+"#/"}},[t._v("首頁")]):t._e()]),a("li",{staticClass:"nav-item"},["/shop"!==t.$route.path?a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link ",attrs:{href:t.publicPath+"#/shop"}},[t._v("商品專區")]):t._e()]),a("li",{staticClass:"nav-item"},["/shop"!==t.$route.path?a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link ",attrs:{href:t.publicPath+"#/shop?tag=cart"}},[t._v("購物車 "),a("span",{staticClass:"badge badge-danger"},[t._v(t._s(t.cartsInVuexLength))])]):t._e()]),a("li",{staticClass:"nav-item"},[t.isLogin?a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link ",attrs:{href:t.publicPath+"#/admin/products"}},[t._v("商品管理")]):t._e()]),a("li",{staticClass:"nav-item"},[t.isLogin?t._e():a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link",attrs:{href:t.publicPath+"#/login"}},[t._v("登入")])]),a("li",{staticClass:"nav-item"},[t.isLogin?a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link ",attrs:{id:"logout"},on:{click:t.logout}},[t._v("登出")]):t._e()])])])])])])},N=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#MainNavbarContent","aria-controls":"MainNavbarContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],D=a("1157"),E=a.n(D),S={data:function(){return{publicPath:"/vueECommercePractice/"}},computed:{isLogin:function(){return this.$store.state.isLogin},cartsInVuexLength:function(){return this.$store.getters.cartsInVuexLength}},methods:{logout:function(){var t=this;t.$store.dispatch("logout")},getCart:function(){var t=this;t.$store.dispatch("getCart")}}},q=S,A=(a("1b40"),Object(k["a"])(q,j,N,!1,null,null,null)),V=A.exports,T={name:"Login",data:function(){return{publicPath:"/vueECommercePractice/",user:{username:"",password:""}}},components:{MainNavbar:V},methods:{signin:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/admin/signin");t.$store.commit("setIsLoading",!0),t.$http.post(e,t.user).then((function(e){var a=e.data.success;a&&(t.$store.commit("setisLogin",!0),t.$store.commit("setIsLoading",!1),t.$router.push("/"))}))}}},U=T,F=(a("7930"),Object(k["a"])(U,O,M,!1,null,"3ad99088",null)),Y=F.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("MainNavbar"),a("div",{staticClass:"container"},[a("div",{staticClass:"row mb-3 justify-content-center"},[a("div",{staticClass:"col-md-8 col-12 mt-2"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-12"},[a("h3",{staticClass:"text-center mt-3"},[t._v("1. 加入購物車")]),a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",t._l(t.cartData.carts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.delCart(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.product.title)+" "),e.coupon?a("div",{staticClass:"text-success"},[t._v(" 已套用優惠券："+t._s(e.coupon.code)+" ")]):t._e()]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.qty)+"/"+t._s(e.product.unit)+" ")]),a("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(e.final_total)+" ")])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.cartData.total))])]),a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v(" 折扣價 ")]),a("td",{staticClass:"text-right text-success"},[t._v(" "+t._s(t.cartData.final_total)+" ")])])])]),a("div",{staticClass:"input-group mb-3 input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.couponCode},on:{input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return t.useCoupon(t.couponCode)}}},[t._v(" 套用優惠碼 ")])])])]),a("div",{staticClass:"col-12"},[a("ValidationObserver",{ref:"observer",staticClass:"my-4 row justify-content-center",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("form",{staticClass:"col-12",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("h3",{staticClass:"text-center mb-4"},[t._v("2. 填寫結帳資訊")]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"email",id:"useremail",placeholder:"請輸入 Email",required:""},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("span",{staticClass:"text-danger"})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名",required:""},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("ValidationProvider",{attrs:{rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"tel",name:"tel",id:"usertel",placeholder:"請輸入電話",required:""},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址",required:""},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"submit",disabled:s}},[t._v(" 送出訂單 ")])])])]}}])})],1),0!==Object.keys(t.orderStatusList).length?a("div",{staticClass:"col-12 mb-4"},[a("h3",{staticClass:"text-center mt-3 mb-4"},[t._v("3. 確認訂單")]),a("div",{attrs:{id:"accordion"}},[t._l(t.orderStatusList,(function(e,s){return a("div",{key:s,staticClass:"card"},[a("div",{staticClass:"pointer card-header",attrs:{id:"heading"+s},on:{click:function(t){e.show=!e.show}}},[a("h5",{staticClass:"mb-0 d-flex justify-content-between align-items-center"},[a("div",[a("button",{staticClass:"btn",attrs:{"data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[t._v(" 訂單編號："+t._s(e.id)+" ")])]),a("div",[e.payStatus?a("span",{staticClass:"badge badge-success"},[t._v("付款完成")]):a("span",{staticClass:"badge badge-danger"},[t._v("尚未付款")])])])]),a("div",{class:{collapse:!0,show:e.show},attrs:{id:"collapse"+s,"aria-labelledby":"heading"+s,"data-parent":"#accordion"}},[a("div",{staticClass:"card-body"},[a("MainCustomerCheckout",{attrs:{orderStatus:e},on:{payOrNot:t.checkPayOrNot}})],1)])])})),a("button",{class:{btn:!0,"btn-secondary":!0,"btn-lg":!0,"btn-block":!0,disabled:!1,"mt-2":!0},attrs:{type:"button"},on:{click:t.clearAllUnpaidOrders}},[t._v(" 清除所有未付款的訂單 ")])],2)]):t._e()])]),a("div",{staticClass:"d-block d-lg-none col-md-8 col-12 mt-4"},[a("button",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{type:"button"},on:{click:function(e){return t.$router.push("/")}}},[t._v(" 返回首頁 ")])])])])],1)},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th"),a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])}],B=(a("99af"),a("4160"),a("c975"),a("a15b"),a("d81d"),a("a434"),a("b64b"),a("ac1f"),a("1276"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"row justify-content-center"},[a("form",{staticClass:"col-12",on:{submit:function(e){return e.preventDefault(),t.payOrder(e)}}},[a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.order.products,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title))]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.qty)+"/"+t._s(e.product.unit)+" ")]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.final_total))])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.order.total))])])])]),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{attrs:{width:"100"}},[t._v("Email")]),a("td",[t._v(t._s(t.order.user.email))])]),a("tr",[a("th",[t._v("姓名")]),a("td",[t._v(t._s(t.order.user.name))])]),a("tr",[a("th",[t._v("收件人電話")]),a("td",[t._v(t._s(t.order.user.tel))])]),a("tr",[a("th",[t._v("收件人地址")]),a("td",[t._v(t._s(t.order.user.address))])]),a("tr",[a("th",[t._v("付款狀態")]),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",[t._v("尚未付款")])])])])]),!1===t.order.is_paid?a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger"},[t._v("確認付款去")])]):t._e()])])],1)}),W=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])}],z={props:["orderStatus"],data:function(){return{isLoading:!1,order:{create_at:null,id:"",is_paid:!1,message:"",payment_method:"",products:[],total:null,user:{address:"",email:"",name:"",tel:""}}}},methods:{getOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/order/").concat(t.orderStatus.id);t.isLoading=!0,t.$http.get(e).then((function(e){var a=e.data,s=a.order,r=a.success;r&&(t.order=s,t.isLoading=!1)}))},payOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/pay/").concat(t.orderStatus.id);t.isLoading=!0,t.$http.post(e).then((function(e){var a=e.data,s=a.message,r=a.success;r&&(t.$bus.$emit("message:push",s,"success"),t.$emit("payOrNot",t.orderStatus.id,!0),t.getOrder())}))}},created:function(){this.getOrder()}},Q=z,J=Object(k["a"])(Q,B,W,!1,null,null,null),K=J.exports,G={components:{MainNavbar:V,MainCustomerCheckout:K},data:function(){return{couponCode:"",orderStatusList:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:{isLoading:function(){return this.$store.state.isLoading},cartData:function(){return this.$store.state.cartData}},methods:{setCart:function(){var t=this;0!==t.cartsInVuexLength&&t.$store.dispatch("setCart")},clearAllUnpaidOrders:function(){var t=this,e=Object.keys(this.orderStatusList).map((function(e){return t.orderStatusList[e]})).filter((function(t){return!1===t.payStatus})).map((function(t){return t.id})),a=this.orderStatusList;e.forEach((function(t){delete a[t]})),localStorage.setItem("orderIds",""),this.orderStatusList=Object(r["a"])({},a)},checkPayOrNot:function(t,e){this.orderStatusList[t]["payStatus"]=e},createOrder:function(){var t=this,e={data:t.form},a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/order");t.$store.commit("setIsLoading",!0),t.$http.post(a,e).then((function(e){var a=e.data,s=a.success,o=a.message,i=a.orderId;if(s){var n=localStorage.getItem("orderIds");null==n||""==n?localStorage.setItem("orderIds","".concat(i)):localStorage.setItem("orderIds","".concat(n,", ").concat(i)),t.$bus.$emit("message:push","".concat(o,"，訂單編號為 ").concat(i),"success"),t.setCart(),t.form={user:{name:"",email:"",tel:"",address:""},message:""},t.$nextTick((function(){return t.$refs.observer.reset()}));var c={};c[i]={id:i,show:!1,payStatus:!1},t.orderStatusList=Object(r["a"])(Object(r["a"])({},t.orderStatusList),c)}else t.$store.commit("setIsLoading",!1),t.$bus.$emit("message:push",o,"danger");t.couponCode=""}))},delCart:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/cart/").concat(t);e.$store.commit("setIsLoading",!0),e.$http.delete(a).then((function(t){var a=t.data.success;a&&(e.$store.dispatch("getCart"),e.$store.commit("setIsLoading",!1))}))},useCoupon:function(t){var e={data:{code:t}},a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/coupon");a.$store.commit("setIsLoading",!0),a.$http.post(s,e).then((function(t){var e=t.data,s=e.success,r=(e.data,e.message);s?(a.$bus.$emit("message:push",r,"success"),a.setCart()):(a.$store.commit("setIsLoading",!1),a.$bus.$emit("message:push",r,"danger")),a.couponCode=""}))}},created:function(){var t=this;t.setCart(),window.scrollTo(0,0);var e=localStorage.getItem("orderIds");if(null!=e&&""!=e){var a=e.split(", ");a.forEach((function(e){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/order/").concat(e);t.$store.commit("setIsLoading",!0),t.$http.get(a).then((function(e){var a=e.data,s=a.order,o=a.success;if(o){if(0==s.is_paid){var i={};i[s.id]={id:s.id,show:!1,payStatus:!1},t.orderStatusList=Object(r["a"])(Object(r["a"])({},t.orderStatusList),i)}else{var n=localStorage.getItem("orderIds"),c=n.split(", ");c.splice(c.indexOf(s.id),1),n=c.join(", "),localStorage.setItem("orderIds","".concat(n))}t.$store.commit("setIsLoading",!1)}}))}))}}},X=G,Z=(a("48c8"),Object(k["a"])(X,R,H,!1,null,"17ec641a",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("MainNavbar"),a("Alert"),a("section",{attrs:{id:"carousel-section"}},[a("div",{staticClass:"container mt-2"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"carousel slide",attrs:{id:"carouselExampleSlidesOnly","data-ride":"carousel"}},[a("div",{staticClass:"carousel-inner"},[a("div",{staticClass:"carousel-item active"},[a("img",{staticClass:"d-block w-100",attrs:{src:t.publicPath+"img/1111.png",alt:"First slide"}})])])])])])])]),a("section",{attrs:{id:"product-section"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"sticky-top col-12 p-0",attrs:{id:"product-navbar-smallscreen"}},[a("div",{staticClass:"d-md-none d-flex col-md-6"},[a("div",{class:{"hover-red":!0,"p-2":!0,"col-4":!0,"hover-red-active":"total"===t.tag},on:{click:function(e){t.tag="total"}}},[t._v(" 全部商品 ")]),a("div",{class:{"hover-red":!0,"p-2":!0,"col-4":!0,"hover-red-active":"popular"===t.tag},on:{click:function(e){t.tag="popular"}}},[t._v(" 熱門商品 ")]),a("div",{class:{"hover-red":!0,"p-2":!0,"col-4":!0,"hover-red-active":"sale"===t.tag},on:{click:function(e){t.tag="sale"}}},[t._v(" 特價商品 ")])]),a("div",{staticClass:"d-md-none d-flex col-md-6 mb-3"},[a("div",{class:{"hover-red":!0,"p-2":!0,"col-4":!0,"hover-red-active":"like"===t.tag},on:{click:function(e){t.tag="like"}}},[a("i",{staticClass:"fas fa-heart"}),t._v(" 已收藏 ")]),a("div",{class:{"hover-red":!0,"p-2":!0,"col-4":!0,"hover-red-active":"cart"===t.tag},on:{click:t.changeToCartPage}},[a("i",{staticClass:"fas fa-shopping-cart"}),t._v(" 購物車 "),a("span",{class:{badge:!0,"badge-danger":"cart"!==t.tag,"badge-secondary":"cart"===t.tag}},[t._v(t._s(t.cartsInVuexLength))])]),a("div",{class:{"hover-red":!0,"p-2":!0,"col-4":!0,"hover-red-active":"coupon"===t.tag},on:{click:function(e){t.tag="coupon"}}},[a("i",{staticClass:"fas fa-ticket-alt"}),t._v(" 領取優惠卷 ")])])]),a("div",{staticClass:"d-none d-md-flex col-md-12 text-center sticky-top mb-3",attrs:{id:"product-navbar-bigscreen"}},[a("div",{class:{"hover-red":!0,"p-2":!0,"col-2":!0,"hover-red-active":"total"===t.tag},on:{click:function(e){t.tag="total"}}},[t._v(" 全部商品 ")]),a("div",{class:{"hover-red":!0,"p-2":!0,"col-2":!0,"hover-red-active":"popular"===t.tag},on:{click:function(e){t.tag="popular"}}},[t._v(" 熱門商品 ")]),a("div",{class:{"hover-red":!0,"p-2":!0,"col-2":!0,"hover-red-active":"sale"===t.tag},on:{click:function(e){t.tag="sale"}}},[t._v(" 特價商品 ")]),a("div",{class:{"hover-red":!0,"p-2":!0,"col-2":!0,"hover-red-active":"like"===t.tag},on:{click:function(e){t.tag="like"}}},[a("i",{staticClass:"fas fa-heart"}),t._v(" 已收藏 ")]),a("div",{class:{"hover-red":!0,"p-2":!0,"col-2":!0,"hover-red-active":"cart"===t.tag},on:{click:t.changeToCartPage}},[a("i",{staticClass:"fas fa-shopping-cart"}),t._v(" 購物車 "),a("span",{class:{badge:!0,"badge-danger":"cart"!==t.tag,"badge-secondary":"cart"===t.tag}},[t._v(t._s(t.cartsInVuexLength))])]),a("div",{class:{"hover-red":!0,"p-2":!0,"col-2":!0,"hover-red-active":"coupon"===t.tag},on:{click:function(e){t.tag="coupon"}}},[a("i",{staticClass:"fas fa-ticket-alt"}),t._v(" 領取優惠卷 ")])]),a("div",{staticClass:"col-sm-12",attrs:{id:"product-list"}},[a("div",{staticClass:"row"},["like"===t.tag&&0===Object.keys(t.filtersProducts).length?a("div",{staticClass:"col-12"},[a("h6",{staticClass:"border rounded p-3"},[t._v("目前沒有商品被加入收藏")])]):t._e(),t._l(t.filtersProducts,(function(e){return a("div",{key:"contain"+e[0].id,staticClass:"col-12 col-lg-4 mb-4"},[a("ProductBox",{key:e[0].id,attrs:{product:e,likeProducts:t.likeProducts,productTitle:e[0].title},on:{sendProductDataOut:t.setProductDataHere}})],1)}))],2),"cart"===t.tag?a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"d-md-block d-none col-12 col-md-4",attrs:{id:"list-group-in-cart"}},[a("div",{staticClass:"list-group mb-2"},[a("a",{class:{"list-group-item":!0,"list-group-item-action":!0,active:"cart"===t.tagInCart},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.tagInCart="cart"}}},[t._v(" 目前購物車內的商品 ")])]),0!==Object.keys(t.orderStatusList).length?a("div",{staticClass:"list-group"},[a("a",{staticClass:"list-group-item list-group-item-action disabled",attrs:{href:"#"}},[t._v("--- 待結帳的訂單編號 ---")]),t._l(t.orderStatusList,(function(e,s){return a("a",{key:s,class:{"list-group-item":!0,"list-group-item-action":!0,active:t.tagInCart===e.id},attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.tagInCart=e.id}}},[e.payStatus?t._e():a("span",{staticClass:"badge badge-danger mr-1"},[t._v("尚未付款")]),e.payStatus?a("span",{staticClass:"badge badge-success mr-1"},[t._v("成功付款")]):t._e(),t._v(" "+t._s(e.id)+" ")])}))],2):t._e(),0!==Object.keys(t.orderStatusList).length?a("button",{class:{btn:!0,"btn-secondary":!0,"btn-md":!0,"btn-block":!0,disabled:!1,"mt-2":!0},attrs:{type:"button"},on:{click:t.clearAllUnpaidOrders}},[t._v(" 清除所有未付款的訂單 ")]):t._e()]),a("div",{staticClass:"col-12 col-md-8",attrs:{id:"order-section"}},["cart"==t.tagInCart?a("div",{staticClass:"accordion",attrs:{id:"accordionExample"}},[a("div",{staticClass:"card",attrs:{id:"cart-in-accordion"}},[t._m(0),a("div",{class:{collapse:!0,show:1===t.collapseStatus},attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordionExample"}},[a("div",{staticClass:"card-body"},[a("table",{staticClass:"table"},[t._m(1),a("tbody",t._l(t.cartDataFromAjax.carts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.delCart(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.product.category)+t._s(e.product.title)+" "),e.coupon?a("div",{staticClass:"text-success"},[t._v(" 已套用優惠券："+t._s(e.coupon.code)+" ")]):t._e()]),a("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(e.final_total)+" ")]),a("td",{staticClass:"align-middle"},[a("input",{staticClass:"form-control",attrs:{type:"number",placeholder:"0","aria-label":"Amount","aria-describedby":"button-addon2",min:"1",max:"99","data-id":e.product_id},domProps:{value:t.cartsInVuex[e.product_id]},on:{input:t.updateQty}})])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(" "+t._s(t.cartDataFromAjax.total)+" ")])]),a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v(" 折扣價 ")]),a("td",{staticClass:"text-right text-success"},[t._v(" "+t._s(t.cartDataFromAjax.final_total)+" ")])])])]),a("div",[a("ValidationObserver",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("form",{on:{submit:function(e){return e.preventDefault(),t.useCoupon(t.couponCode)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.useCoupon(t.couponCode)}}},[a("div",{staticClass:"form-group"},[a("ValidationProvider",{attrs:{rules:"characters:10"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[a("div",{staticClass:"input-group mb-3 input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],class:{"form-control":!0,"is-invalid":r[0]},attrs:{type:"text",name:"coupon",id:"coupon-code",placeholder:"請輸入 10 碼內的優惠碼（不限數字）"},domProps:{value:t.couponCode},on:{input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"submit",disabled:s}},[t._v(" 套用優惠碼 ")])])]),a("span",{staticClass:"text-danger"},[t._v(t._s(r[0]))])]}}],null,!0)}),a("span",{staticClass:"text-danger"})],1)])]}}],null,!1,1599334105)})],1)])])]),a("div",{staticClass:"card",attrs:{id:"order-info-in-accordion"}},[a("div",{staticClass:"card-header",attrs:{id:"headingTwo"}},[a("h5",{staticClass:"mb-0"},[a("button",{staticClass:"btn btn-link collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"},on:{click:t.setCart}},[t._v(" 步驟２ 填寫結帳資訊 ")])])]),a("div",{class:{collapse:!0,show:1!==t.collapseStatus},attrs:{id:"collapseTwo","aria-labelledby":"headingTwo","data-parent":"#accordionExample"}},[a("div",{staticClass:"card-body"},[a("ValidationObserver",{ref:"observer",staticClass:"my-4 row justify-content-center",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("form",{staticClass:"col-12",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("h3",{staticClass:"text-center mb-4"},[t._v("2. 填寫結帳資訊")]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email（必填）")]),a("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"email",id:"useremail",placeholder:"請輸入 Email",required:""},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("span",{staticClass:"text-danger"})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名（必填）")]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名",required:""},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話（必填）")]),a("ValidationProvider",{attrs:{rules:"required|numeric|characters:10"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"tel",name:"tel",id:"usertel",placeholder:"請輸入電話",required:""},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址（必填）")]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址",required:""},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言（選填）")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"submit",disabled:s}},[t._v(" 送出訂單 ")])])])]}}],null,!1,2195008024)})],1)])])]):t._e(),t._l(t.orderStatusList,(function(e,s){return a("div",{key:s,attrs:{id:"wait-for-payment-section"+s}},[t.tagInCart===e.id?a("div",[a("MainCustomerCheckout",{attrs:{orderStatus:e},on:{payOrNot:t.checkPayOrNot}})],1):t._e()])}))],2)]):t._e(),"coupon"===t.tag?a("div",{staticClass:"row justify-content-center mt-5 mb-5"},[a("div",{staticClass:"col-12 col-md-6 text-center"},[a("img",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.value,expression:"value"}],staticClass:"img-fluid coupon-img mb-3",attrs:{src:t.publicPath+"img/coupon.png",alt:"Responsive image"},on:{click:t.copyCouponCode}}),a("a",{attrs:{href:"https://www.vecteezy.com/free-vector/gift"}},[t._v("Gift Vectors by Vecteezy")])])]):t._e()])])])]),t._m(2)],1)},at=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header",attrs:{id:"headingOne"}},[a("h5",{staticClass:"mb-0"},[a("button",{staticClass:"btn btn-link",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[t._v(" 步驟１ 確認購物車 ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th"),a("th",[t._v("品名")]),a("th",[t._v("單價")]),a("th",[t._v("數量")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"page-footer font-small cyan darken-3 text-center mt-5"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 py-5"},[a("div",{staticClass:"flex-center"},[a("a",{staticClass:"facebook-ic",attrs:{target:"_blank",href:"https://www.facebook.com/lloyd3126/"}},[a("i",{staticClass:"fab fa-facebook-f fa-lg white-text mr-md-5 mr-3 fa-2x"})]),a("a",{staticClass:"linkdin-ic",attrs:{target:"_blank",href:"https://www.linkedin.com/in/lloyd3126/"}},[a("i",{staticClass:"fab fa-linkedin-in fa-lg white-text mr-md-5 mr-3 fa-2x"})]),a("a",{staticClass:"google-ic",attrs:{href:"mailto: lloyd3126@gmail.com"}},[a("i",{staticClass:"fab fa-google fa-lg white-text mr-md-5 mr-3 fa-2x"})]),a("a",{staticClass:"github-ic",attrs:{target:"_blank",href:"https://github.com/lloyd3126"}},[a("i",{staticClass:"fab fa-github fa-lg white-text fa-2x"})])])])])]),a("div",{staticClass:"footer-copyright text-center pt-3 "},[a("a",{attrs:{href:"https://github.com/lloyd3126/"}},[t._v(" 陳重年 Chen Chung Nien")]),t._v(" © 2020 Copyright ")]),a("div",{staticClass:"footer-copyright text-center pb-3"},[a("a",{attrs:{href:"https://www.freepik.com/vectors/background"}},[t._v(" Background vector created by freepik - www.freepik.com")])])])}],st=(a("a4d3"),a("e01a"),a("13d5"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert"},t._l(t.messages,(function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+e.status},[t._v(" "+t._s(e.message)+" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])})),0)}),rt=[],ot={name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout((function(){e.messages.forEach((function(a,s){a.timestamp===t&&e.messages.splice(s,1)}))}),5e3)}},created:function(){var t=this;t.$bus.$on("message:push",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(e,a)}))}},it=ot,nt=(a("82d5"),Object(k["a"])(it,st,rt,!1,null,null,null)),ct=nt.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"card border-0 "},[a("div",{staticClass:"position-absolute like-icon",on:{click:t.likeHandler}},[t.like?a("i",{staticClass:"fas fa-heart heart-color"}):a("i",{staticClass:"far fa-heart"})]),a("a",{staticClass:"product-link",attrs:{href:t.publicPath+"#/product/"+t.product[0].title}},[a("div",{staticClass:"card-photo",style:{backgroundImage:"url("+t.product[0].imageUrl+")"}}),a("div",{staticClass:"card-body"},[t._l(t.product,(function(e){return a("span",{key:e.id,staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(e.category))])})),a("h5",{staticClass:"card-title"},[a("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(t.product[0].title))])]),a("p",{staticClass:"card-text"},[t._v(t._s(t.product[0].content))]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},t._l(t.product,(function(e){return a("div",{key:e.id},[a("span",{staticClass:"badge badge-secondary mb-2"},[t._v(t._s(e.category))]),e.origin_price!==e.price?a("span",{staticClass:"badge badge-danger mb-2 ml-1"},[t._v("特價中")]):t._e(),a("h5",[t._v("定價 "+t._s(e.origin_price)+" 元")])])})),0)],2),a("div",{staticClass:"card-footer d-flex"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.getProduct(t.product[0].title)}}},[t.status.dataLoading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 查看更多 ")]),a("button",{staticClass:"btn btn-outline-danger dropdown-toggle btn-sm ml-auto",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t.status.orderSending?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加到購物車 ")]),a("div",{staticClass:"dropdown-menu"},t._l(t.product,(function(e){return a("a",{key:e.id,staticClass:"dropdown-item ",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.addCart(e.id)}}},[a("span",{staticClass:"badge badge-secondary mb-2"},[t._v(t._s(e.category))]),e.origin_price!==e.price?a("span",{staticClass:"badge badge-danger mb-2 ml-1"},[t._v(" 現省 "+t._s(e.origin_price-e.price)+" 元")]):t._e(),e.origin_price!==e.price?a("h6",[t._v(" 特價 "+t._s(e.price)+" 元 ")]):t._e(),e.origin_price==e.price?a("h6",[t._v(" 原價 "+t._s(e.origin_price)+" 元 ")]):t._e()])})),0)])])])],1)},dt=[],ut=(a("caad"),a("2532"),{props:["product","likeProducts"],data:function(){return{publicPath:"/vueECommercePractice/",status:{dataLoading:!1,orderSending:!1},isLoading:!1,like:!1}},created:function(){this.like=Object.keys(this.likeProducts).includes(this.product[0].title)},computed:{products:function(){return this.$store.state.products}},methods:{likeHandler:function(){this.like=!this.like,this.like?(this.$emit("sendProductDataOut",this.product,"like"),this.$bus.$emit("message:push","將".concat(this.product[0].title,"加入收藏"),"success")):(this.$emit("sendProductDataOut",this.product,"unlike"),this.$bus.$emit("message:push","將".concat(this.product[0].title,"移除收藏"),"danger"))},getProduct:function(t){this.$router.push("/product/".concat(t))},addCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this;a.$store.commit("setCartsInVuexData",{productId:t,qty:e}),a.$bus.$emit("message:push","將".concat(a.products[t].category).concat(a.products[t].title,"加入購物車"),"success")}}}),pt=ut,mt=(a("24b0"),Object(k["a"])(pt,lt,dt,!1,null,null,null)),vt=mt.exports,gt={components:{MainNavbar:V,Alert:ct,ProductBox:vt,MainCustomerCheckout:K},data:function(){return{publicPath:"/vueECommercePractice/",value:"1225",form:{user:{name:"",email:"",tel:"",address:""},message:""},couponCode:"",currentPage:1,pagination:{},products:[],tempProduct:{title:"",imageUrl:"",description:"",content:"",items:[]},likeProducts:[],tag:"total",tagInCart:"cart",orderStatusList:{},collapseStatus:1}},computed:{unpayOrderNum:function(){var t=this;return Object.keys(t.orderStatusList).map((function(e){return t.orderStatusList[e].payStatus?0:1})).reduce((function(t,e){return t+e}))},filtersProducts:function(){var t=this;if("total"==t.tag){var e=t.products;return e}if("popular"==t.tag){var a=["雙層荔枝乳酪","愛戀馬卡龍"],s={};a.forEach((function(e){s[e]=t.products[e]}));var o=s;return o}if("sale"==t.tag){var i=[];Object.keys(t.products).forEach((function(e){var a=0;t.products[e].forEach((function(t){parseInt(t.price)<parseInt(t.origin_price)&&(a+=1)})),Boolean(a)&&i.push(t.products[e])}));var n={};i.forEach((function(t){n[t[0].title]=t}));var c=n;return c}if("like"===t.tag){var l=Object(r["a"])({},t.likeProducts);return l}},isLoading:function(){return this.$store.state.isLoading},cartDataFromAjax:function(){return this.$store.state.cartDataFromAjax},cartsInVuex:function(){return this.$store.state.cartsInVuex},cartsInVuexLength:function(){return this.$store.getters.cartsInVuexLength}},methods:{setCart:function(){var t=this;0!==t.cartsInVuexLength&&t.$store.dispatch("setCart")},updateQty:function(t){var e={id:t.target.dataset.id,val:t.target.value};this.$store.commit("updateQty",e)},changeToCartPage:function(){var t=this;t.tag="cart",t.cartsInVuexLength>0&&(t.tagInCart="cart"),t.setCart()},copyCouponCode:function(){this.$bus.$emit("message:push","已複製優惠代碼：".concat(this.value),"success")},checkPayOrNot:function(t,e){var a=this;a.orderStatusList[t]["payStatus"]=e,0===a.unpayOrderNum&&(a.tag="total")},createOrder:function(){var t=this;t.collapseStatus=2;var e={data:t.form},a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/order");t.$store.commit("setIsLoading",!0),t.$http.post(a,e).then((function(e){var a=e.data,s=a.success,o=a.message,i=a.orderId;if(s){t.collapseStatus=1;var n=localStorage.getItem("orderIds");null==n||""==n?localStorage.setItem("orderIds","".concat(i)):localStorage.setItem("orderIds","".concat(n,", ").concat(i)),t.$bus.$emit("message:push","".concat(o,"，訂單編號為 ").concat(i),"success"),t.$store.dispatch("getCart",{loadingEffect:!1}),t.form={user:{name:"",email:"",tel:"",address:""},message:""};var c={};c[i]={id:i,show:!1,payStatus:!1},t.orderStatusList=Object(r["a"])(Object(r["a"])({},t.orderStatusList),c),t.$store.commit("clearCartsInVuexData"),t.tagInCart=i,t.$store.commit("setIsLoading",!1)}else t.collapseStatus=1,t.$store.commit("setIsLoading",!1),t.$bus.$emit("message:push",o,"danger");t.couponCode=""}))},delCart:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/cart/").concat(t);e.$store.commit("setIsLoading",!0),e.$http.delete(a).then((function(a){var s=a.data.success;s&&(e.$store.commit("deleteProductInVuexCarts",{id:t}),e.$store.dispatch("getCart",{loadingEffect:!1}),e.$store.commit("setIsLoading",!1))}))},useCoupon:function(t){var e=this;if(""!==t)if(e.cartsInVuexLength<1)e.$bus.$emit("message:push","購物車內尚無商品","danger");else{var a={data:{code:t}},s="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/coupon");e.$store.commit("setIsLoading",!0),e.$http.post(s,a).then((function(t){var a=t.data,s=a.success,r=(a.data,a.message);s?(e.$bus.$emit("message:push",r,"success"),e.$store.dispatch("getCart",{loadingEffect:!1}),e.$store.commit("setIsLoading",!1)):(e.$store.commit("setIsLoading",!1),e.$bus.$emit("message:push",r,"danger")),e.couponCode=""}))}else e.$bus.$emit("message:push","請輸入完整優惠碼","danger")},setProductDataHere:function(t,e){var a=this,s=t[0].title;"moreInfo"===e?(this.tempProduct=t,this.tempProduct.title=t[0].title,this.tempProduct.imageUrl=t[0].imageUrl,this.tempProduct.description=t[0].description,this.tempProduct.content=t[0].content,this.tempProduct.items=t,this.tempProduct.items.forEach((function(t){a.$set(t,"amount","1")}))):"like"===e?this.likeProducts[s]=t:"unlike"===e&&delete this.likeProducts[s]},getProducts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/products/all");t.$http.get(e).then((function(e){var a=e.data,s=a.products,r=a.success;if(r){var o={};s.forEach((function(t){t.is_enabled&&(-1==Object.keys(o).indexOf(t.title)&&(o[t.title]=[]),o[t.title].push(t))})),t.products=o}}))},clearAllUnpaidOrders:function(){var t=this,e=Object.keys(this.orderStatusList).map((function(e){return t.orderStatusList[e]})).filter((function(t){return!1===t.payStatus})).map((function(t){return t.id})),a=this.orderStatusList;e.forEach((function(t){delete a[t]})),localStorage.setItem("orderIds",""),this.orderStatusList=Object(r["a"])({},a)}},mounted:function(){var t=localStorage.getItem("orderIds");null!=t&&""!=t&&this.$bus.$emit("message:push","尚有訂單未完成付款，請至購物車查看！","warning")},created:function(){var t=this;t.tagInCart="cart",t.$store.dispatch("getProducts",{loadingEffect:!1}),t.$route.query.tag&&(t.tag=t.$route.query.tag),window.scrollTo(0,0),t.getProducts();var e=localStorage.getItem("orderIds");if(null!=e&&""!=e){var a=e.split(", ");a.forEach((function(e){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/order/").concat(e);t.$store.commit("setIsLoading",!0),t.$http.get(a).then((function(e){var a=e.data,s=a.order,o=a.success;if(o){if(0==s.is_paid){var i={};i[s.id]={id:s.id,show:!1,payStatus:!1},t.orderStatusList=Object(r["a"])(Object(r["a"])({},t.orderStatusList),i)}else{var n=localStorage.getItem("orderIds"),c=n.split(", ");c.splice(c.indexOf(s.id),1),n=c.join(", "),localStorage.setItem("orderIds","".concat(n))}t.$store.commit("setIsLoading",!1)}}))}))}t.setCart()}},ft=gt,ht=(a("36c4"),Object(k["a"])(ft,et,at,!1,null,"9cb5faac",null)),bt=ht.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("nav",[t.scrollNum>1?a("div",[a("div",{class:{box:!0,"box-color":t.scrollNum>5}}),a("MainNavbarFixed")],1):t._e()]),a("header",[a("div",{staticClass:"cover",style:{"background-image":"url("+t.coverImgUrl+")"}},[t.scrollNum<1?a("i",{staticClass:"fas fa-angle-double-down"}):t._e()])]),a("section",{attrs:{id:"news-section"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center d-flex"},[a("div",{staticClass:"col-xl-9 col-12"},[a("h3",{staticClass:"text-center mt-5 mb-3"},[t._v(" 最新消息 ")]),a("ul",{attrs:{id:"msgUl"}},[a("li",[a("a",{staticClass:"d-flex",attrs:{href:t.publicPath+"#/shop?tag=coupon"}},[a("p",{staticClass:"dateTxt mr-3"},[t._v("2020/11/01")]),a("p",{staticClass:"msgTxt"},[t._v(" 老闆就愛跟風，2020/11/11 AM 11:11:11 限時限量釋出 11 張 1.1 折全品項優惠卷。 ")])])]),a("li",[a("a",{staticClass:"d-flex",attrs:{href:t.publicPath+"#/shop?tag=popular"}},[a("p",{staticClass:"dateTxt mr-3"},[t._v("2020/10/01")]),a("p",{staticClass:"msgTxt"},[t._v(" 雙十節檔期，國旗造型、國父造型蛋糕各 10 \b個預約開放中。 ")])])]),a("li",[a("a",{staticClass:"d-flex",attrs:{href:t.publicPath+"#/shop?tag=popular"}},[a("p",{staticClass:"dateTxt mr-3"},[t._v("2020/09/25")]),a("p",{staticClass:"msgTxt"},[t._v(" 中秋佳節月圓人團圓，柚子口味蛋糕限時銷售。 ")])])]),a("li",[a("a",{staticClass:"d-flex",attrs:{href:t.publicPath+"#/shop?tag=coupon"}},[a("p",{staticClass:"dateTxt mr-3"},[t._v("2020/07/10")]),a("p",{staticClass:"msgTxt"},[t._v(" 籌備一年終於開店了 94 爽，開幕慶 5 折優惠卷瘋搶 ")])])])])])])])]),a("section",{attrs:{id:"product-section"}},[a("div",{staticClass:"mt-5 mb-5",attrs:{id:"fragmentBanner"}},[t._v("商品專區")]),a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center d-flex"},[a("ul",{staticClass:"col-xl-10 col-12"},[a("li",{staticClass:"card flex-lg-row mb-4"},[a("div",{staticClass:"col-12 col-lg-5 p-0"},[a("div",{staticClass:"productImg",style:{"background-image":"url("+t.popularImgUrl+")"}},[a("div",{staticClass:"black-cover"})])]),a("div",{staticClass:"col-12 col-lg-7 card-body p-lg-5 m-lg-3"},[a("h5",{staticClass:"card-title"},[t._v("熱門商品")]),a("p",{staticClass:"card-text"},[t._v(" 店內最暢銷的熱門口味，想嘗試但怕踩雷的最佳選擇。 ")]),a("a",{staticClass:"btn btn-primary",attrs:{href:t.publicPath+"#/shop?tag=popular"}},[t._v("來去看看")])])]),a("li",{staticClass:"card flex-lg-row-reverse mb-4"},[a("div",{staticClass:"col-12 col-lg-5 p-0"},[a("div",{staticClass:"productImg",style:{"background-image":"url("+t.saleImgUrl+")"}},[a("div",{staticClass:"black-cover"})])]),a("div",{staticClass:"col-12 col-lg-7 card-body p-lg-5 m-lg-3"},[a("h5",{staticClass:"card-title"},[t._v("特價商品")]),a("p",{staticClass:"card-text"},[t._v(" 特價是想要推廣，更優惠的價錢推薦你相同品質的四分之一蛋糕。 ")]),a("a",{staticClass:"btn btn-primary",attrs:{href:t.publicPath+"#/shop?tag=sale"}},[t._v("手刀搶購去")])])]),a("li",{staticClass:"card flex-lg-row mb-4"},[a("div",{staticClass:"col-12 col-lg-5 p-0"},[a("div",{staticClass:"productImg",style:{"background-image":"url("+t.couponImgUrl+")"}},[a("div",{staticClass:"black-cover"})])]),a("div",{staticClass:"col-12 col-lg-7 card-body p-lg-5 m-lg-3"},[a("h5",{staticClass:"card-title"},[t._v("優惠卷")]),a("p",{staticClass:"card-text"},[t._v(" 下單前記得找找看有沒有能用的優惠卷！ ")]),a("a",{staticClass:"btn btn-primary",attrs:{href:t.publicPath+"#/shop?tag=coupon"}},[t._v("領阿哪次不領")])])])])])])]),t._m(0)],1)},_t=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"page-footer font-small cyan darken-3 text-center mt-5"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 py-5"},[a("div",{staticClass:"flex-center"},[a("a",{staticClass:"facebook-ic",attrs:{target:"_blank",href:"https://www.facebook.com/lloyd3126/"}},[a("i",{staticClass:"fab fa-facebook-f fa-lg white-text mr-md-5 mr-3 fa-2x"})]),a("a",{staticClass:"linkdin-ic",attrs:{target:"_blank",href:"https://www.linkedin.com/in/lloyd3126/"}},[a("i",{staticClass:"fab fa-linkedin-in fa-lg white-text mr-md-5 mr-3 fa-2x"})]),a("a",{staticClass:"google-ic",attrs:{href:"mailto: lloyd3126@gmail.com"}},[a("i",{staticClass:"fab fa-google fa-lg white-text mr-md-5 mr-3 fa-2x"})]),a("a",{staticClass:"github-ic",attrs:{target:"_blank",href:"https://github.com/lloyd3126"}},[a("i",{staticClass:"fab fa-github fa-lg white-text fa-2x"})])])])])]),a("div",{staticClass:"footer-copyright text-center pt-3 "},[a("a",{attrs:{href:"https://github.com/lloyd3126/"}},[t._v(" 陳重年 Chen Chung Nien")]),t._v(" © 2020 Copyright ")]),a("div",{staticClass:"footer-copyright text-center pb-3"},[a("a",{attrs:{href:"https://www.freepik.com/vectors/background"}},[t._v(" Background vector created by freepik - www.freepik.com")])])])}],yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light shadow-sm fixed-top"},[a("div",{staticClass:"container"},[a("a",{staticClass:"text-dark d-flex align-items-center",attrs:{href:t.publicPath+"#/"}},[a("img",{staticClass:"mr-2",attrs:{src:t.publicPath+"img/logo.png",alt:"",srcset:"",width:"158"}})]),t._m(0),a("div",{staticClass:"collapse navbar-collapse justify-content-end order-3 order-md-1",attrs:{id:"MainNavbarFixedContent"}},[a("ul",{staticClass:"navbar-nav"},[a("li",{staticClass:"nav-item"},["/"!==t.$route.path?a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link ",attrs:{href:t.publicPath+"#/"}},[t._v("首頁")]):t._e()]),a("li",{staticClass:"nav-item"},["/shop"!==t.$route.path?a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link ",attrs:{href:t.publicPath+"#/shop"}},[t._v("商品專區")]):t._e()]),a("li",{staticClass:"nav-item"},["/shop"!==t.$route.path?a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link ",attrs:{href:t.publicPath+"#/shop?tag=cart"}},[t._v("購物車 "),a("span",{staticClass:"badge badge-danger"},[t._v(t._s(t.cartsInVuexLength))])]):t._e()]),a("li",{staticClass:"nav-item"},[t.isLogin?a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link ",attrs:{href:t.publicPath+"#/admin/products"}},[t._v("商品管理")]):t._e()]),a("li",{staticClass:"nav-item"},[t.isLogin?t._e():a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link",attrs:{href:t.publicPath+"#/login"}},[t._v("登入")])]),a("li",{staticClass:"nav-item"},[t.isLogin?a("a",{staticClass:"mx-2 link-hover font-weight-bold text-dark nav-link ",attrs:{id:"logout"},on:{click:t.logout}},[t._v("登出")]):t._e()])])])])])])},xt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#MainNavbarFixedContent","aria-controls":"MainNavbarFixedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],kt={data:function(){return{publicPath:"/vueECommercePractice/"}},computed:{isLogin:function(){return this.$store.state.isLogin},cartsInVuexLength:function(){return this.$store.getters.cartsInVuexLength}},methods:{logout:function(){var t=this;t.$store.dispatch("logout")}}},Pt=kt,wt=(a("7320"),Object(k["a"])(Pt,yt,xt,!1,null,null,null)),$t=wt.exports,Lt={components:{MainNavbarFixed:$t},data:function(){return{isLoading:!1,publicPath:"/vueECommercePractice/",coverImgUrl:"./img/cover.jpg",couponImgUrl:"./img/coupon_link.jpg",popularImgUrl:"./img/popular_link.jpg",saleImgUrl:"./img/sale_link.jpg",scrollNum:0}},methods:{handleScroll:function(t){this.scrollNum=window.scrollY},handleResize:function(t){window.innerWidth<1060&&window.innerWidth>541?this.coverImgUrl="./img/cover-md.jpg":window.innerWidth<=540?this.coverImgUrl="./img/cover-sm.jpg":this.coverImgUrl="./img/cover.jpg"}},created:function(){window.scrollTo(0,0)},mounted:function(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleResize),window.innerWidth<1060&&window.innerWidth>541?this.coverImgUrl="./img/cover-md.jpg":window.innerWidth<=540?this.coverImgUrl="./img/cover-sm.jpg":this.coverImgUrl="./img/cover.jpg"},destroyed:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize)}},It=Lt,Ot=(a("1e4b"),Object(k["a"])(It,Ct,_t,!1,null,"56bfac02",null)),Mt=Ot.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("MainNavbar"),a("Alert"),a("div",{staticClass:"container"},[a("div",{staticClass:"row mb-3 justify-content-center"},[a("div",{staticClass:"col-md-8 col-12 mt-2"},[a("h2",{staticClass:"mt-3 mb-2"},[t._v(t._s(t.products[0].title))]),a("p",{staticClass:"mb-1"},[t._v(t._s(t.products[0].description))]),a("p",{staticClass:"mb-1"},[t._v(t._s(t.products[0].content))]),a("hr")]),a("div",{staticClass:"col-md-8 col-12 mt-2"},[a("div",{staticClass:"carousel slide",attrs:{id:"carouselExampleSlidesOnly","data-ride":"carousel"}},[a("div",{staticClass:"carousel-inner"},[a("div",{staticClass:"carousel-item active"},[a("img",{staticClass:"d-block w-100",attrs:{src:t.products[0].imageUrl,alt:"First slide"}})])])])]),a("div",{staticClass:"col-md-8 col-12 mt-2"},[a("div",{staticClass:"card-group"},t._l(t.products,(function(e){return a("div",{key:e.id,staticClass:"card mt-3 text-center"},[a("h6",{staticClass:"card-header"},[e.origin_price!==e.price?a("span",{staticClass:"sale-tag badge badge-danger position-absolute"},[t._v(" 特價中")]):t._e(),t._v(" "+t._s(e.category)+" ")]),a("div",{staticClass:"card-body"},[e.origin_price===e.price?a("h5",{staticClass:"card-title"},[t._v(" 售價 "+t._s(e.price)+" 元 ")]):a("h5",{staticClass:"card-title"},[t._v("特價 "+t._s(e.price)+" 元")]),a("h6",{staticClass:"card-subtitle mb-2 text-muted line-text"},[t._v(" 定價 "+t._s(e.origin_price)+" 元 ")]),a("div",{staticClass:"input-group mt-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"product.amount"}],staticClass:"form-control",attrs:{type:"number",placeholder:"數量","aria-label":"Amount","aria-describedby":"button-addon2",min:"1",max:"99"},domProps:{value:e.amount},on:{input:function(a){a.target.composing||t.$set(e,"amount",a.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{class:{btn:!0,"btn-danger":!0,disabled:e.amount<1||!1},attrs:{type:"button",id:"button-addon2"},on:{click:function(a){return t.addCart(e.id,e.amount)}}},[t._v(" 加入購物車 ")])])])]),a("div",{staticClass:"card-footer text-muted"},[t._v(" 小計 "+t._s(e.amount*e.price)+" 元 ")])])})),0)]),a("div",{staticClass:"d-block d-lg-none col-md-8 col-12 mt-4"},[a("button",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{type:"button"},on:{click:function(e){return t.$router.push("/")}}},[t._v(" 返回首頁 ")]),a("button",{staticClass:"btn btn-success btn-lg btn-block",attrs:{type:"button"},on:{click:function(e){return t.$router.push("/cart")}}},[t._v(" 前往購物車 ")])]),a("div",{staticClass:"linkBox col-md-8 col-12 mt-4"},[a("a",{staticClass:"btn btn-outline-success btn-md btn-block",attrs:{type:"button",href:t.publicPath+"#/shop?tag=cart"}},[t._v(" 結帳去 ")])]),a("div",{staticClass:"linkBox col-md-8 col-12 mt-4"},[a("div",{staticClass:"d-flex justify-content-between"},[a("a",{staticClass:"linkToTatalProducts border rounded p-3 text-left",attrs:{href:t.publicPath+"#/shop"}},[a("i",{staticClass:"fas fa-arrow-left mr-2"}),t._v(" 返回商品專區 ")]),a("a",{staticClass:"linkToNextProduct border rounded p-3 text-right",on:{click:t.linkToNextProduct}},[t._v("順手帶走"+t._s(t.nextProductName)+" "),a("i",{staticClass:"fas fa-arrow-right ml-2"})])])])])]),t._m(0)],1)},Nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"page-footer font-small cyan darken-3 text-center mt-5"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 py-5"},[a("div",{staticClass:"flex-center"},[a("a",{staticClass:"facebook-ic",attrs:{target:"_blank",href:"https://www.facebook.com/lloyd3126/"}},[a("i",{staticClass:"fab fa-facebook-f fa-lg white-text mr-md-5 mr-3 fa-2x"})]),a("a",{staticClass:"linkdin-ic",attrs:{target:"_blank",href:"https://www.linkedin.com/in/lloyd3126/"}},[a("i",{staticClass:"fab fa-linkedin-in fa-lg white-text mr-md-5 mr-3 fa-2x"})]),a("a",{staticClass:"google-ic",attrs:{href:"mailto: lloyd3126@gmail.com"}},[a("i",{staticClass:"fab fa-google fa-lg white-text mr-md-5 mr-3 fa-2x"})]),a("a",{staticClass:"github-ic",attrs:{target:"_blank",href:"https://github.com/lloyd3126"}},[a("i",{staticClass:"fab fa-github fa-lg white-text fa-2x"})])])])])]),a("div",{staticClass:"footer-copyright text-center pt-3 "},[a("a",{attrs:{href:"https://github.com/lloyd3126/"}},[t._v(" 陳重年 Chen Chung Nien")]),t._v(" © 2020 Copyright ")]),a("div",{staticClass:"footer-copyright text-center pb-3"},[a("a",{attrs:{href:"https://www.freepik.com/vectors/background"}},[t._v(" Background vector created by freepik - www.freepik.com")])])])}],Dt=(a("5319"),{components:{MainNavbar:V,Alert:ct},data:function(){return{publicPath:"/vueECommercePractice/",products:[{imageUrl:""}],productName:""}},computed:{nextProductName:function(){var t=this,e=t.productsInVuex.indexOf(t.productName)+1;return e===t.productsInVuex.length&&(e=0),t.productsInVuex[e]},isLoading:function(){return this.$store.state.isLoading},cartsInVuex:function(){return this.$store.state.cartsInVuex},productsInVuex:function(){var t=this,e=[];return Object.keys(t.$store.state.products).forEach((function(a){e.includes(t.$store.state.products[a].title)||e.push(t.$store.state.products[a].title)})),e}},methods:{linkToNextProduct:function(){var t=this;document.title="".concat(t.nextProductName,"｜四分之一蛋糕工作室"),t.$router.push("/product/".concat(t.nextProductName)),t.productName=t.nextProductName,t.getProducts(),t.$store.dispatch("getProducts",{loadingEffect:!0}),window.scrollTo(0,0)},getProducts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/products/all");t.$http.get(e).then((function(e){var a=e.data,s=a.products,r=a.success;if(r){t.products=[],s.forEach((function(e){e.amount=1,e.title===t.productName&&e.is_enabled&&t.products.push(e)}))}}))},addCart:function(t,e){var a=this;"number"!==typeof e||parseInt(e)<=0||(a.$store.commit("setCartsInVuexData",{productId:t,qty:e}),a.products.forEach((function(e){e.id===t&&a.$bus.$emit("message:push","將".concat(e.category).concat(e.title,"加入購物車"),"success")})))}},created:function(){var t=this;t.getProducts(),t.productName=t.$route.path.replace("/product/",""),document.title="".concat(t.productName,"｜四分之一蛋糕工作室"),t.$store.dispatch("getProducts",{loadingEffect:!0})}}),Et=Dt,St=(a("6c6b"),Object(k["a"])(Et,jt,Nt,!1,null,null,null)),qt=St.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("AdminNavbar"),a("Alert"),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("Sidebar"),a("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-4",attrs:{role:"main"}},[a("router-view")],1)],1)])],1)},Vt=[],Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("nav",{staticClass:"col-md-2 d-none d-md-block bg-light sidebar"},[a("div",{staticClass:"sidebar-sticky"},[t._m(0),a("ul",{staticClass:"nav flex-column"},[a("li",{staticClass:"nav-item",on:{click:function(e){return t.checkRoute("products")}}},[a("h6",[a("router-link",{class:{"nav-link":!0,active:"products"==t.status.pageName},attrs:{to:"/admin/products"}},[a("i",{staticClass:"fas fa-box-open"}),t._v(" 產品列表 ")])],1)]),a("li",{staticClass:"nav-item",on:{click:function(e){return t.checkRoute("orders")}}},[a("h6",[a("router-link",{class:{"nav-link":!0,active:"orders"==t.status.pageName},attrs:{to:"/admin/orders"}},[a("i",{staticClass:"fa fa-list-alt",attrs:{"aria-hidden":"true"}}),t._v(" 訂單列表 ")])],1)]),a("li",{staticClass:"nav-item",on:{click:function(e){return t.checkRoute("coupons")}}},[a("h6",[a("router-link",{class:{"nav-link":!0,active:"coupons"==t.status.pageName},attrs:{to:"/admin/coupons"}},[a("i",{staticClass:"fa fa-ticket",attrs:{"aria-hidden":"true"}}),t._v(" 優惠卷 ")])],1)])]),t._m(1),a("ul",{staticClass:"nav flex-column mb-2"},[a("li",{staticClass:"nav-item",on:{click:function(e){return t.checkRoute("simulation")}}},[a("h6",[a("router-link",{class:{"nav-link":!0,active:"simulation"==t.status.pageName},attrs:{to:"/admin/simulation"}},[a("i",{staticClass:"fas fa-shopping-cart"}),t._v(" 模擬訂單 ")])],1)])])])])],1)},Ut=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[a("span",[t._v("管理員")]),a("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#"}},[a("span",{attrs:{"data-feather":"plus-circle"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[a("span",[t._v("模擬功能")]),a("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#"}},[a("span",{attrs:{"data-feather":"plus-circle"}})])])}],Ft={data:function(){return{isLoading:!1,status:{pageName:""}}},methods:{checkRoute:function(t){var e=this;this.status.pageName!==t&&(this.status.pageName=t,this.isLoading=!0,this.$router.afterEach((function(t,a){e.isLoading=!1})))}},created:function(){this.status.pageName=this.$route.path.replace("/admin/","")}},Yt=Ft,Rt=Object(k["a"])(Yt,Tt,Ut,!1,null,null,null),Ht=Rt.exports,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},[a("a",{staticClass:"navbar-brand col-sm-3 col-md-2 mr-0",attrs:{href:t.publicPath+"#/"}},[t._v("四分之一蛋糕工作室")]),a("ul",{staticClass:"navbar-nav px-3"},[a("li",{staticClass:"nav-item text-nowrap"},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:t.logout}},[t._v("登出")])])])])])},Wt=[],zt={data:function(){return{publicPath:"/vueECommercePractice/"}},methods:{logout:function(){var t=this;t.$store.dispatch("logout"),t.$router.push("/")}}},Qt=zt,Jt=Object(k["a"])(Qt,Bt,Wt,!1,null,null,null),Kt=Jt.exports,Gt={components:{Sidebar:Ht,AdminNavbar:Kt,Alert:ct}},Xt=Gt,Zt=Object(k["a"])(Xt,At,Vt,!1,null,null,null),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"text-right mt-4"},[0!==t.tempProducts.length?a("button",{staticClass:"btn btn-outline-primary mr-1",on:{click:function(e){t.tempProducts=[]}}},[t._v(" 清除選取 ")]):a("button",{staticClass:"btn btn-primary mr-1",on:{click:function(e){t.tempProducts=[].concat(t.products)}}},[t._v(" 全部選取 ")]),a("button",{staticClass:"btn btn-primary mr-1",on:{click:function(e){return t.copyProducts()}}},[t._v(" 批量複製 ")]),a("button",{staticClass:"btn btn-primary mr-1",on:{click:function(e){return t.openDeleteProductsModal()}}},[t._v(" 批量刪除 ")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openModal()}}},[t._v(" 建立新商品 ")])]),a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",t._l(t.products,(function(e){return a("tr",{key:e.id},[a("td",[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts,expression:"tempProducts"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.tempProducts)?t._i(t.tempProducts,e)>-1:t.tempProducts},on:{change:function(a){var s=t.tempProducts,r=a.target,o=!!r.checked;if(Array.isArray(s)){var i=e,n=t._i(s,i);r.checked?n<0&&(t.tempProducts=s.concat([i])):n>-1&&(t.tempProducts=s.slice(0,n).concat(s.slice(n+1)))}else t.tempProducts=o}}})])]),a("td",[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.title))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.origin_price)))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.price)))]),a("td",[1==e.is_enabled?a("span",{staticClass:"text-success"},[t._v("啟用")]):a("span",[t._v("未啟用")])]),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm mr-1",on:{click:function(a){return t.openModal(e)}}},[t._v(" 編輯 ")]),a("button",{staticClass:"btn btn-outline-primary btn-sm mr-1",on:{click:function(a){return t.copyProduct(e)}}},[t._v(" 複製 ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(a){return t.openDeleteProductModal(e.id)}}},[t._v(" 刪除 ")])])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},["post"==t.requestMethods?a("span",[t._v("新增產品")]):a("span",[t._v("編輯產品")])]),t._m(1)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"imageUrl",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customFile"}},[t._v("或 上傳圖片 "),t.status.fileUploading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),a("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),a("img",{staticClass:"img-fluid",attrs:{img:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80",alt:"",src:t.tempProduct.imageUrl}})]),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("產品描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("說明內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,1)},on:{change:function(e){var a=t.tempProduct.is_enabled,s=e.target,r=s.checked?1:0;if(Array.isArray(a)){var o=null,i=t._i(a,o);s.checked?i<0&&t.$set(t.tempProduct,"is_enabled",a.concat([o])):i>-1&&t.$set(t.tempProduct,"is_enabled",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.tempProduct,"is_enabled",r)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v(" 是否啟用 ")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v(" 確認 ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"deleteProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"deleteProductModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-body"},[t._v(" 請確認是否要刪除此產品？ ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteProduct(t.deleteProductId)}}},[t._v(" 確認 ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"deleteProductsModal",tabindex:"-1",role:"dialog","aria-labelledby":"deleteProductsModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(3),a("div",{staticClass:"modal-body"},[t._v(" 請確認是否要刪除已選取的所有產品？ ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteProducts()}}},[t._v(" 確認 ")])])])])]),a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{class:{"page-item":!0,disabled:!t.pagination.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.clickPagination(t.pagination.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,class:{"page-item":!0,active:e==t.pagination.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.clickPagination(e)}}},[t._v(t._s(e))])])})),a("li",{class:{"page-item":!0,disabled:!t.pagination.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.clickPagination(t.pagination.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])],1)},ae=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"80"}},[t._v("選取")]),a("th",{attrs:{width:"120"}},[t._v("分類")]),a("th",{attrs:{width:"auto"}},[t._v("產品名稱")]),a("th",{attrs:{width:"80"}},[t._v("原價")]),a("th",{attrs:{width:"80"}},[t._v("售價")]),a("th",{attrs:{width:"100"}},[t._v("是否啟用")]),a("th",{attrs:{width:"180"}},[t._v("操作")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"deleteProductModalLabel"}},[t._v(" 刪除產品 ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"deleteProductsModalLabel"}},[t._v(" 批量刪除產品 ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],se={data:function(){return{products:[],tempProduct:{title:"",category:"",origin_price:"",price:"",imageUrl:"",description:"",content:"",is_enabled:0},tempProducts:[],requestMethods:"",deleteProductId:"",isLoading:!1,status:{fileUploading:!1,openModalName:"",enterAllow:!1},currentPage:1,pagination:{}}},methods:{clickPagination:function(t){this.currentPage=t,this.getProducts()},getProducts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/products?page=").concat(t.currentPage);t.isLoading=!0,t.$http.get(e).then((function(e){t.products=e.data.products,t.pagination=Object(r["a"])({},e.data.pagination),t.isLoading=!1,t.status.enterAllow=!0,t.status.openModalName=""}))},cleanModalInput:function(){this.tempProduct.title="",this.tempProduct.category="",this.tempProduct.origin_price="",this.tempProduct.price="",this.tempProduct.imageUrl="",this.tempProduct.description="",this.tempProduct.content="",this.tempProduct.is_enabled=0},openModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];E()("#productModal").modal("show"),t?(this.status.openModalName="編輯",this.requestMethods="put",this.tempProduct=Object(r["a"])({},t)):(this.status.openModalName="建立新商品",this.requestMethods="post",this.cleanModalInput())},finshAllModalInput:function(){var t=this.tempProduct,e=t.title,a=t.category,s=t.origin_price,r=t.price,o=t.unit,i=t.imageUrl,n=t.description,c=t.content;t.is_enabled;return""!=e&&""!=a&&""!=s&&""!=r&&""!=o&&""!=i&&""!=n&&""!=c},updateProduct:function(){var t=this;if(t.finshAllModalInput())if("put"==t.requestMethods){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/product/").concat(t.tempProduct.id);t.$http.put(e,{data:t.tempProduct}).then((function(e){var a=e.data.success;a?(E()("#productModal").modal("hide"),t.cleanModalInput(),t.getProducts()):t.getProducts()}))}else{var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/product");t.$http.post(a,{data:t.tempProduct}).then((function(e){var a=e.data.success;a?(E()("#productModal").modal("hide"),t.cleanModalInput(),t.getProducts()):t.getProducts()}))}},deleteProduct:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/product/").concat(t);e.$http.delete(a).then((function(t){var a=t.data.success;a?(E()("#deleteProductModal").modal("hide"),e.getProducts()):e.getProducts()}))},uploadFile:function(){var t=this,e=t.$refs.files.files[0];t.status.fileUploading=!0;var a=new FormData;a.append("file-to-upload",e);var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/upload"),r={headers:{"Content-Type":"multipart/form-data"}};t.$http.post(s,a,r).then((function(e){var a=e.data;a.success?(t.$set(t.tempProduct,"imageUrl",a.imageUrl),t.status.fileUploading=!1,t.$bus.$emit("message:push","圖片上傳成功","success")):(t.status.fileUploading=!1,"string"==typeof e.data.message?t.$bus.$emit("message:push",e.data.message,"danger"):t.$bus.$emit("message:push","檔案過大","danger"))}))},copyProduct:function(t){this.isLoading=!0;var e=t.title,a=t.category,s=t.origin_price,r=t.price,o=t.imageUrl,i=t.description,n=t.content,c=t.is_enabled;this.tempProduct={title:e,category:a,origin_price:s,price:r,imageUrl:o,description:i,content:n,is_enabled:c},this.requestMethods="post",this.updateProduct()},copyProducts:function(){var t=this,e=t.tempProducts.length;if(0!==e){var a=0,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/product");t.isLoading=!0,t.tempProducts.forEach((function(r){t.$http.post(s,{data:r}).then((function(s){var r=s.data.success;r?(a+=1,a==e&&t.getProducts()):t.getProducts()}))})),t.tempProducts=[]}else t.$bus.$emit("message:push","請至少勾選一個商品","danger")},openDeleteProductModal:function(t){E()("#deleteProductModal").modal("show"),this.status.openModalName="刪除",this.deleteProductId=t},openDeleteProductsModal:function(){var t=this.tempProducts.length;0!==t?(E()("#deleteProductsModal").modal("show"),this.status.openModalName="批量刪除"):this.$bus.$emit("message:push","請至少勾選一個商品","danger")},deleteProducts:function(){var t=this,e=t.tempProducts.length;if(0!==e){var a=0;t.isLoading=!0,E()("#deleteProductsModal").modal("hide"),t.tempProducts.forEach((function(s){var r="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/product/").concat(s.id);t.$http.delete(r).then((function(s){var r=s.data.success;r?(a+=1,a==e&&t.getProducts()):t.getProducts()}))})),t.tempProducts=[]}else t.$bus.$emit("message:push","請至少勾選一個商品","danger")}},mounted:function(){var t=this;window.addEventListener("keydown",(function(e){13===e.keyCode&&!0===e.ctrlKey&&1==t.status.enterAllow&&("建立新商品"!=t.status.openModalName&&"編輯"!=t.status.openModalName||(t.status.enterAllow=!1,t.updateProduct()),"刪除"==t.status.openModalName&&(t.status.enterAllow=!1,t.deleteProduct(t.deleteProductId)),"批量刪除"==t.status.openModalName&&(t.status.enterAllow=!1,t.deleteProducts()))}))},created:function(){this.getProducts()}},re=se,oe=Object(k["a"])(re,ee,ae,!1,null,null,null),ie=oe.exports,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("table",{staticClass:"table mt-5"},[t._m(0),a("tbody",t._l(t.orders,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(t.changeTimestamp(e.create_at)))]),a("td",[t._v(t._s(e.user.email))]),a("td",t._l(e.products,(function(e){return a("p",{key:e.id,staticClass:"m-0"},[t._v(" "+t._s(e.product.title)+"："+t._s(e.qty)+" "+t._s(e.product.unit)+" ")])})),0),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.total)))]),"true"==e.is_paid?a("td",{staticClass:"green-word"},[t._v("已付款")]):a("td",[t._v("尚未付款")]),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm mr-1",on:{click:function(a){return t.openModal(e)}}},[t._v(" 編輯 ")]),a("button",{staticClass:"btn btn-outline-primary btn-sm mr-1",on:{click:function(a){return t.confirmOrder(e)}}},[t._v(" 確認付款 ")])])])})),0)]),a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{class:{"page-item":!0,disabled:!t.pagination.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.clickPagination(t.pagination.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,class:{"page-item":!0,active:e==t.pagination.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.clickPagination(e)}}},[t._v(t._s(e))])])})),a("li",{class:{"page-item":!0,disabled:!t.pagination.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.clickPagination(t.pagination.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)]),a("div",{staticClass:"modal fade",attrs:{id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"create_at"}},[t._v("訂單建立日")]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"create_at",disabled:""},domProps:{value:t.changeTimestamp(t.tempOrder.create_at)}})]),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"paid_date"}},[t._v("付款完成日")]),t.tempOrder.paid_date?a("input",{staticClass:"form-control",attrs:{type:"text",id:"paid_date",disabled:""},domProps:{value:t.changeTimestamp(t.tempOrder.paid_date)}}):a("input",{staticClass:"form-control",attrs:{type:"text",id:"no_create_at",value:"尚未付款",disabled:""}})]),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"exampleFormControlSelect1"}},[t._v("修改付款狀態")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.is_paid,expression:"tempOrder.is_paid"}],staticClass:"form-control",attrs:{id:"exampleFormControlSelect1"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tempOrder,"is_paid",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"true"}},[t._v("已付款")]),a("option",{attrs:{value:"false"}},[t._v("尚未付款")])])])]),a("hr"),a("h6",[t._v("購買品項")]),a("div",{staticClass:"form-row"},t._l(t.tempOrder.products,(function(e){return a("div",{key:e.id,staticClass:"form-group col-md-3 mb-1"},[a("label",{attrs:{for:e.id}},[t._v(t._s(e.product.title)+"("+t._s(e.product.unit)+")")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.qty,expression:"item.qty"}],staticClass:"form-control",attrs:{min:"0",max:"99",type:"number",id:e.id},domProps:{value:e.qty},on:{input:function(a){a.target.composing||t.$set(e,"qty",a.target.value)}}})])})),0),a("hr"),a("ValidationObserver",{ref:"observer",staticClass:"row justify-content-center",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("form",{staticClass:"col-md-12",on:{submit:function(e){return e.preventDefault(),t.updateOrder(t.tempOrder)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.email,expression:"tempOrder.user.email"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"email",id:"useremail",placeholder:"請輸入 Email",required:""},domProps:{value:t.tempOrder.user.email},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"email",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("span",{staticClass:"text-danger"})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.name,expression:"tempOrder.user.name"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名",required:""},domProps:{value:t.tempOrder.user.name},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"name",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("ValidationProvider",{attrs:{rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.tel,expression:"tempOrder.user.tel"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"tel",name:"tel",id:"usertel",placeholder:"請輸入電話",required:""},domProps:{value:t.tempOrder.user.tel},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"tel",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.address,expression:"tempOrder.user.address"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址",required:""},domProps:{value:t.tempOrder.user.address},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"address",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.message,expression:"tempOrder.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.tempOrder.message},on:{input:function(e){e.target.composing||t.$set(t.tempOrder,"message",e.target.value)}}})]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-outline-secondary mr-2",attrs:{type:"button ","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"submit",disabled:s}},[t._v(" 送出訂單 ")])])])]}}])})],1)])])])],1)},ce=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"110"}},[t._v("購買日期")]),a("th",{attrs:{width:"300"}},[t._v("電子信箱")]),a("th",{attrs:{width:"auto"}},[t._v("購買品項")]),a("th",{attrs:{width:"100"}},[t._v("應付金額")]),a("th",{attrs:{width:"100"}},[t._v("付款狀態")]),a("th",{attrs:{width:"160"}},[t._v("操作")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("編輯訂單")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],le=a("ade3"),de={data:function(){return{tempOrder:{create_at:null,id:"",is_paid:!1,message:"",paid_date:null,payment_method:"",products:{},total:0,user:{address:"",email:"",name:"",tel:""},num:0},orders:[],products:{},isLoading:!1,currentPage:1,pagination:{}}},computed:{},methods:(s={changeTimestamp:function(t){var e=new Date(1e3*t),a=[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()];return"".concat(a[0],"/").concat(a[1],"/").concat(a[2])},openModal:function(t){this.tempOrder=t,E()("#orderModal").modal("show")},updateOrder:function(t){var e=this;e.isLoading=!0;var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/order/").concat(t.id),s={data:t};e.$http.put(a,s).then((function(t){var a=t.data,s=a.success,r=a.message;s?e.$bus.$emit("message:push",r,"success"):e.$bus.$emit("message:push",r,"danger"),e.getOrders()}))},clickPagination:function(t){this.currentPage=t,this.getOrders()},getOrders:function(){var t=this;E()("#orderModal").modal("hide"),this.tempOrder={create_at:null,id:"",is_paid:!1,message:"",paid_date:null,payment_method:"",products:{},total:0,user:{address:"",email:"",name:"",tel:""},num:0},t.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/orders?page=").concat(t.currentPage);t.$http.get(e).then((function(e){t.orders=e.data.orders,t.pagination=Object(r["a"])({},e.data.pagination),t.isLoading=!1}))},getProducts:function(){var t=this;t.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/products/");t.$http.get(e).then((function(e){e.data.products.forEach((function(e){return t.products[e.id]=Object(r["a"])({},e)})),t.getOrders()}))}},Object(le["a"])(s,"changeTimestamp",(function(t){var e=new Date(1e3*t),a=[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()];return"".concat(a[0],"/").concat(a[1],"/").concat(a[2])})),Object(le["a"])(s,"confirmOrder",(function(t){var e=this;e.isLoading=!0;var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/order/").concat(t.id),s={data:Object(r["a"])(Object(r["a"])({},t),{},{is_paid:!0})};e.$http.put(a,s).then((function(t){var a=t.data,s=a.success,r=a.message;s?(e.$bus.$emit("message:push",r,"success"),e.getOrders()):(e.$bus.$emit("message:push",r,"danger"),e.getOrders())}))})),s),created:function(){this.getProducts(),E()("#orderModal").modal("hide")},mounted:function(){var t=this;E()("#orderModal").on("hidden.bs.modal",(function(e){t.getOrders()}))}},ue=de,pe=(a("5155"),Object(k["a"])(ue,ne,ce,!1,null,"c742dad4",null)),me=pe.exports,ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"text-right mt-4"},[0!==t.tempCoupons.length?a("button",{staticClass:"btn btn-outline-primary mr-1",on:{click:function(e){t.tempCoupons=[]}}},[t._v(" 清除選取 ")]):a("button",{staticClass:"btn btn-primary mr-1",on:{click:function(e){t.tempCoupons=[].concat(t.coupons)}}},[t._v(" 全部選取 ")]),a("button",{staticClass:"btn btn-primary mr-1",on:{click:function(e){return t.copyCoupons()}}},[t._v(" 批量複製 ")]),a("button",{staticClass:"btn btn-primary mr-1",on:{click:function(e){return t.openDeleteCouponsModal()}}},[t._v(" 批量刪除 ")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openModal()}}},[t._v(" 建立優惠卷 ")])]),a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",t._l(t.coupons,(function(e){return a("tr",{key:e.id},[a("td",[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons,expression:"tempCoupons"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.tempCoupons)?t._i(t.tempCoupons,e)>-1:t.tempCoupons},on:{change:function(a){var s=t.tempCoupons,r=a.target,o=!!r.checked;if(Array.isArray(s)){var i=e,n=t._i(s,i);r.checked?n<0&&(t.tempCoupons=s.concat([i])):n>-1&&(t.tempCoupons=s.slice(0,n).concat(s.slice(n+1)))}else t.tempCoupons=o}}})])]),a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.percent))]),a("td",[t._v(t._s(t.changeTimestamp(e.due_date)))]),a("td",[1==e.is_enabled?a("span",{staticClass:"text-success"},[t._v("啟用")]):a("span",[t._v("未啟用")])]),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm mr-1",on:{click:function(a){return t.openModal(e)}}},[t._v(" 編輯 ")]),a("button",{staticClass:"btn btn-outline-primary btn-sm mr-1",on:{click:function(a){return t.copyCoupon(e)}}},[t._v(" 複製 ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(a){return t.openDeleteCouponModal(e.id)}}},[t._v(" 刪除 ")])])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},["post"==t.requestMethods?a("span",[t._v("新增優惠卷")]):a("span",[t._v("編輯優惠卷")])]),t._m(1)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("優惠碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",disabled:"put"===t.requestMethods,id:"category",placeholder:"請輸入優惠碼"},domProps:{value:t.tempCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"code",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"percent"}},[t._v("折扣百分比")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{min:"1",max:"100",type:"number",id:"percent",placeholder:"請輸入折扣百分比"},domProps:{value:t.tempCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"percent",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"origin_price"}},[t._v("到期日")]),a("form",{staticClass:"form-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.dueDateYear,expression:"tempCoupon.dueDateYear"}],staticClass:"form-control mb-2 mr-sm-2",attrs:{min:"1911",max:"2100",type:"number",id:"expiryDateYear",placeholder:"請輸入年"},domProps:{value:t.tempCoupon.dueDateYear},on:{blur:function(e){return t.blurHandler("Year")},input:function(e){e.target.composing||t.$set(t.tempCoupon,"dueDateYear",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.dueDateMonth,expression:"tempCoupon.dueDateMonth"}],staticClass:"form-control mb-2 mr-sm-2",attrs:{min:"1",max:"12",type:"number",id:"expiryDateMonth",placeholder:"請輸入月"},domProps:{value:t.tempCoupon.dueDateMonth},on:{blur:function(e){return t.blurHandler("Month")},input:function(e){e.target.composing||t.$set(t.tempCoupon,"dueDateMonth",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.dueDateDay,expression:"tempCoupon.dueDateDay"}],staticClass:"form-control mb-2 mr-sm-2",attrs:{min:"1",max:"31",type:"number",id:"expiryDateDay",placeholder:"請輸入日"},domProps:{value:t.tempCoupon.dueDateDay},on:{blur:function(e){return t.blurHandler("Day")},input:function(e){e.target.composing||t.$set(t.tempCoupon,"dueDateDay",e.target.value)}}})])])]),a("hr"),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(e){var a=t.tempCoupon.is_enabled,s=e.target,r=s.checked?1:0;if(Array.isArray(a)){var o=null,i=t._i(a,o);s.checked?i<0&&t.$set(t.tempCoupon,"is_enabled",a.concat([o])):i>-1&&t.$set(t.tempCoupon,"is_enabled",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.tempCoupon,"is_enabled",r)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v(" 是否啟用 ")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v(" 確認 ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"deleteCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"deleteCouponModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-body"},[t._v(" 請確認是否要刪除此產品？ ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteCoupon(t.deleteCouponId)}}},[t._v(" 確認 ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"deleteCouponsModal",tabindex:"-1",role:"dialog","aria-labelledby":"deleteCouponsModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(3),a("div",{staticClass:"modal-body"},[t._v(" 請確認是否要刪除已選取的所有產品？ ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteCoupons()}}},[t._v(" 確認 ")])])])])]),a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{class:{"page-item":!0,disabled:!t.pagination.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.clickPagination(t.pagination.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,class:{"page-item":!0,active:e==t.pagination.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.clickPagination(e)}}},[t._v(t._s(e))])])})),a("li",{class:{"page-item":!0,disabled:!t.pagination.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.clickPagination(t.pagination.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])],1)},ge=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"80"}},[t._v("選取")]),a("th",{attrs:{width:"auto"}},[t._v("名稱")]),a("th",{attrs:{width:"200"}},[t._v("折扣百分比")]),a("th",{attrs:{width:"200"}},[t._v("到期日")]),a("th",{attrs:{width:"100"}},[t._v("是否啟用")]),a("th",{attrs:{width:"180"}},[t._v("操作")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"deleteCouponModalLabel"}},[t._v(" 刪除產品 ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"deleteCouponsModalLabel"}},[t._v(" 批量刪除產品 ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],fe=(a("a9e3"),{data:function(){return{coupons:[],tempCoupon:{code:"",dueDateDay:"1",dueDateMonth:"1",dueDateYear:"2000",is_enabled:0,percent:100,title:"",due_date:0},tempCoupons:[],requestMethods:"",deleteCouponId:"",isLoading:!1,status:{fileUploading:!1,openModalName:"",enterAllow:!1},currentPage:1,pagination:{}}},computed:{dueDate:function(){var t=new Date(parseInt(this.tempCoupon.dueDateYear),parseInt(this.tempCoupon.dueDateMonth)-1,parseInt(this.tempCoupon.dueDateDay));return Number(t)/1e3}},methods:{blurHandler:function(t){this.tempCoupon["dueDateDay".concat(t)]=document.getElementById("expiryDate".concat(t)).value},changeTimestamp:function(t){var e=new Date(1e3*t),a=[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()];return"".concat(a[0],"/").concat(a[1],"/").concat(a[2])},clickPagination:function(t){this.currentPage=t,this.getCoupons()},getCoupons:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/coupons?page=").concat(t.currentPage);t.isLoading=!0,this.$http.get(e).then((function(e){t.coupons=e.data.coupons,t.pagination=Object(r["a"])({},e.data.pagination),t.isLoading=!1,t.status.enterAllow=!0,t.status.openModalName=""}))},cleanModalInput:function(){this.tempCoupon.code="",this.tempCoupon.dueDateDay="1",this.tempCoupon.dueDateMonth="1",this.tempCoupon.dueDateYear="2000",this.tempCoupon.is_enabled=0,this.tempCoupon.percent="100",this.tempCoupon.title="",this.tempCoupon.id=null},openModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];E()("#couponModal").modal("show"),t?(this.status.openModalName="編輯",this.requestMethods="put",this.cleanModalInput(),this.tempCoupon=Object(r["a"])({},t),this.tempCoupon.dueDateYear=this.changeTimestamp(t.due_date).split("/")[0],this.tempCoupon.dueDateMonth=this.changeTimestamp(t.due_date).split("/")[1],this.tempCoupon.dueDateDay=this.changeTimestamp(t.due_date).split("/")[2]):(this.status.openModalName="建立新商品",this.requestMethods="post",this.cleanModalInput())},updateCoupon:function(){var t=this;if("put"==t.requestMethods){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/coupon/").concat(this.tempCoupon.id),a=t.tempCoupon,s=a.title,r=a.is_enabled,o=a.percent,i={data:{title:s,is_enabled:r,percent:o,due_date:t.dueDate}};t.$http.put(e,i).then((function(e){var a=e.data.success;a?(E()("#couponModal").modal("hide"),t.cleanModalInput(),t.getCoupons()):t.getCoupons()}))}else{var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/coupon"),c=t.tempCoupon,l=c.title,d=c.is_enabled,u=c.percent,p=c.code,m={data:{title:l,is_enabled:d,percent:u,code:p,due_date:t.dueDate}};t.$http.post(n,m).then((function(e){var a=e.data.success;a?(E()("#couponModal").modal("hide"),t.cleanModalInput(),t.getCoupons()):t.getCoupons()}))}},deleteCoupon:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/coupon/").concat(t);this.$http.delete(a).then((function(t){var a=t.data.success;a?(E()("#deleteCouponModal").modal("hide"),e.getCoupons()):e.getCoupons()}))},copyCoupon:function(t){this.isLoading=!0;t.title,t.is_enabled,t.percent,t.code;var e=t.due_date;this.cleanModalInput(),this.tempCoupon=Object(r["a"])({},t),this.tempCoupon.dueDateYear=this.changeTimestamp(e).split("/")[0],this.tempCoupon.dueDateMonth=this.changeTimestamp(e).split("/")[1],this.tempCoupon.dueDateDay=this.changeTimestamp(e).split("/")[2],this.requestMethods="post",this.updateCoupon()},copyCoupons:function(){var t=this,e=t.tempCoupons.length;if(0!==e){var a=0,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/coupon");t.isLoading=!0,t.tempCoupons.forEach((function(o){o.title,o.is_enabled,o.percent,o.code;var i=o.due_date;t.cleanModalInput(),t.tempCoupon=Object(r["a"])({},o),t.tempCoupon.dueDateYear=t.changeTimestamp(i).split("/")[0],t.tempCoupon.dueDateMonth=t.changeTimestamp(i).split("/")[1],t.tempCoupon.dueDateDay=t.changeTimestamp(i).split("/")[2],t.$http.post(s,{data:t.tempCoupon}).then((function(s){var r=s.data.success;r?(a+=1,a==e&&t.getCoupons()):t.getCoupons()}))})),t.tempCoupons=[]}else t.$bus.$emit("message:push","請至少勾選一個商品","danger")},openDeleteCouponModal:function(t){E()("#deleteCouponModal").modal("show"),this.status.openModalName="刪除",this.deleteCouponId=t},openDeleteCouponsModal:function(){var t=this.tempCoupons.length;0!==t?(E()("#deleteCouponsModal").modal("show"),this.status.openModalName="批量刪除"):this.$bus.$emit("message:push","請至少勾選一個商品","danger")},deleteCoupons:function(){var t=this,e=t.tempCoupons.length;if(0!==e){var a=0;t.isLoading=!0,E()("#deleteCouponsModal").modal("hide"),t.tempCoupons.forEach((function(s){var r="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/admin/coupon/").concat(s.id);t.$http.delete(r).then((function(s){var r=s.data.success;r?(a+=1,a==e&&t.getCoupons()):t.getCoupons()}))})),t.tempCoupons=[]}else t.$bus.$emit("message:push","請至少勾選一個商品","danger")}},mounted:function(){var t=this;window.addEventListener("keydown",(function(e){13===e.keyCode&&!0===e.ctrlKey&&1==t.status.enterAllow&&("建立新商品"!=t.status.openModalName&&"編輯"!=t.status.openModalName||(t.status.enterAllow=!1,t.updateCoupon()),"刪除"==t.status.openModalName&&(t.status.enterAllow=!1,t.deleteCoupon(t.deleteCouponId)),"批量刪除"==t.status.openModalName&&(t.status.enterAllow=!1,t.deleteCoupons()))}))},created:function(){this.getCoupons()}}),he=fe,be=Object(k["a"])(he,ve,ge,!1,null,null,null),Ce=be.exports,_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"row mt-4"},t._l(t.products,(function(e){return a("div",{key:e[0].id,staticClass:"col-md-3 mb-4"},[a("div",{staticClass:"card border-0 shadow-sm"},[a("div",{staticClass:"card-photo",style:{backgroundImage:"url("+e[0].imageUrl+")"}}),a("div",{staticClass:"card-body"},[t._l(e,(function(e){return a("span",{key:e.id,staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(e.category))])})),a("h5",{staticClass:"card-title"},[a("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(e[0].title))])]),a("p",{staticClass:"card-text"},[t._v(t._s(e[0].content))]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},t._l(e,(function(e){return a("div",{key:e.id},[a("span",{staticClass:"badge badge-secondary mb-2"},[t._v(t._s(e.category))]),e.origin_price!==e.price?a("span",{staticClass:"badge badge-danger mb-2 ml-1"},[t._v("特價中")]):t._e(),a("div",{staticClass:"h5"},[t._v("定價 "+t._s(e.origin_price)+" 元")])])})),0)],2),a("div",{staticClass:"card-footer d-flex"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.getProduct(e[0].title)}}},[t.status.dataLoading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 查看更多 ")]),a("button",{staticClass:"btn btn-outline-danger dropdown-toggle btn-sm ml-auto",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t.status.orderSending?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加到購物車 ")]),a("div",{staticClass:"dropdown-menu"},t._l(e,(function(e){return a("a",{key:e.id,staticClass:"dropdown-item ",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.addCart(e.id)}}},[a("span",{staticClass:"badge badge-secondary mb-2"},[t._v(t._s(e.category))]),e.origin_price!==e.price?a("span",{staticClass:"badge badge-danger mb-2 ml-1"},[t._v(" 現省 "+t._s(e.origin_price-e.price)+" 元")]):t._e(),e.origin_price!==e.price?a("h6",[t._v(" 特價 "+t._s(e.price)+" 元 ")]):t._e(),e.origin_price==e.price?a("h6",[t._v(" 原價 "+t._s(e.origin_price)+" 元 ")]):t._e()])})),0)])])])})),0),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"productModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"productModalLabel"}},[t._v(" "+t._s(t.tempProduct.title)+" ")]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("img",{staticClass:"img-fluid",attrs:{src:t.tempProduct.imageUrl,alt:"Responsive image"}}),a("h6",{staticClass:"mt-3"},[t._v(" "+t._s(t.tempProduct.content)+" ")]),a("h6",{staticClass:"mt-3"},[t._v(" "+t._s(t.tempProduct.description)+" ")]),a("div",{staticClass:"card-group"},t._l(t.tempProduct.items,(function(e){return a("div",{key:e.id,staticClass:"card mt-3 text-center"},[a("h6",{staticClass:"card-header"},[e.origin_price!==e.price?a("span",{staticClass:"sale-tag badge badge-danger position-absolute"},[t._v(" 特價中")]):t._e(),t._v(" "+t._s(e.category)+" ")]),a("div",{staticClass:"card-body"},[e.origin_price===e.price?a("h5",{staticClass:"card-title"},[t._v(" 售價 "+t._s(e.price)+" 元 ")]):a("h5",{staticClass:"card-title"},[t._v("特價 "+t._s(e.price)+" 元")]),a("h6",{staticClass:"line-text card-subtitle mb-2 text-muted"},[t._v(" 定價 "+t._s(e.origin_price)+" 元 ")]),a("div",{staticClass:"input-group mt-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"item.amount"}],staticClass:"form-control",attrs:{type:"number",placeholder:"數量","aria-label":"Amount","aria-describedby":"button-addon2",min:"1",max:"99"},domProps:{value:e.amount},on:{input:function(a){a.target.composing||t.$set(e,"amount",a.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button",id:"button-addon2"},on:{click:function(a){return t.addCart(e.id,e.amount)}}},[t._v(" 加入購物車 ")])])])]),a("div",{staticClass:"card-footer text-muted"},[t._v(" 小計 "+t._s(e.amount*e.price)+" 元 ")])])})),0)]),t._m(1)])])]),a("hr"),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-6"},[a("h3",{staticClass:"text-center mt-3"},[t._v("購物車")]),a("table",{staticClass:"table mt-4"},[t._m(2),a("tbody",t._l(t.cartData.carts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.delCart(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.product.title)+" "),e.coupon?a("div",{staticClass:"text-success"},[t._v(" 已套用優惠券："+t._s(e.coupon.code)+" ")]):t._e()]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.qty)+"/"+t._s(e.product.unit)+" ")]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.final_total))])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.cartData.total))])]),a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),a("td",{staticClass:"text-right text-success"},[t._v(" "+t._s(t.cartData.final_total)+" ")])])])]),a("div",{staticClass:"input-group mb-3 input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.couponCode},on:{input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return t.useCoupon(t.couponCode)}}},[t._v(" 套用優惠碼 ")])])])])]),a("ValidationObserver",{ref:"observer",staticClass:"my-4 row justify-content-center",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("h3",{staticClass:"text-center mb-4"},[t._v("結帳資訊")]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"email",id:"useremail",placeholder:"請輸入 Email",required:""},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("span",{staticClass:"text-danger"})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名",required:""},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("ValidationProvider",{attrs:{rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"tel",name:"tel",id:"usertel",placeholder:"請輸入電話",required:""},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址",required:""},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"submit",disabled:s}},[t._v(" 送出訂單 ")])])])]}}])})],1)},ye=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 關閉 ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th"),a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])}],xe={data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},couponCode:"",cartData:{},products:[],tempProduct:{title:"",imageUrl:"",description:"",content:"",items:[]},isLoading:!1,pagination:{},status:{dataLoading:!1,orderSending:!1}}},methods:{getProducts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/products/all");t.isLoading=!0,t.$http.get(e).then((function(e){var a=e.data,s=a.products,r=a.success;if(r){var o={};s.forEach((function(t){t.is_enabled&&(-1==Object.keys(o).indexOf(t.title)&&(o[t.title]=[]),o[t.title].push(t))})),t.products=o}t.isLoading=!1}))},getProduct:function(t){var e=this;this.tempProduct.title=this.products[t][0].title,this.tempProduct.imageUrl=this.products[t][0].imageUrl,this.tempProduct.description=this.products[t][0].description,this.tempProduct.content=this.products[t][0].content,this.tempProduct.items=this.products[t],this.tempProduct.items.forEach((function(t){e.$set(t,"amount","1")})),E()("#productModal").modal("show")},addCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this,s={data:{product_id:t,qty:e}},r="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/cart");a.isLoading=!0,a.$http.post(r,s).then((function(t){var e=t.data.success;e&&(a.isLoading=!1,a.getCart())}))},getCart:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/cart");t.$http.get(e).then((function(e){var a=e.data,s=a.success,r=a.data;s&&(t.cartData=r,t.isLoading=!1)}))},delCart:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/cart/").concat(t);e.isLoading=!0,e.$http.delete(a).then((function(t){var a=t.data.success;a&&(e.getCart(),e.isLoading=!1)}))},useCoupon:function(t){var e=this,a={data:{code:t}},s="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/coupon");e.isLoading=!0,e.$http.post(s,a).then((function(t){var a=t.data,s=a.success,r=(a.data,a.message);s?(e.$bus.$emit("message:push",r,"success"),e.getCart()):(e.isLoading=!1,e.$bus.$emit("message:push",r,"danger")),e.couponCode=""}))},createOrder:function(){var t=this,e={data:t.form},a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/order");t.isLoading=!0,t.$http.post(a,e).then((function(e){var a=e.data,s=a.success,r=a.message,o=a.orderId;s?(t.$bus.$emit("message:push",r,"success"),t.getCart(),t.form={user:{name:"",email:"",tel:"",address:""},message:""},t.$nextTick((function(){return t.$refs.observer.reset()})),t.$router.push("/admin/customer_checkout/".concat(o))):(t.isLoading=!1,t.$bus.$emit("message:push",r,"danger")),t.couponCode=""}))}},created:function(){this.getProducts(),this.getCart()}},ke=xe,Pe=(a("baec"),Object(k["a"])(ke,_e,ye,!1,null,null,null)),we=Pe.exports,$e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"my-5 row justify-content-center"},[a("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.payOrder(e)}}},[a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.order.products,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title))]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.qty)+"/"+t._s(e.product.unit)+" ")]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.final_total))])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.order.total))])])])]),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{attrs:{width:"100"}},[t._v("Email")]),a("td",[t._v(t._s(t.order.user.email))])]),a("tr",[a("th",[t._v("姓名")]),a("td",[t._v(t._s(t.order.user.name))])]),a("tr",[a("th",[t._v("收件人電話")]),a("td",[t._v(t._s(t.order.user.tel))])]),a("tr",[a("th",[t._v("收件人地址")]),a("td",[t._v(t._s(t.order.user.address))])]),a("tr",[a("th",[t._v("付款狀態")]),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",[t._v("尚未付款")])])])])]),!1===t.order.is_paid?a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger"},[t._v("確認付款去")])]):t._e()])])],1)},Le=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])}],Ie={data:function(){return{isLoading:!1,orderId:"",order:{create_at:null,id:"",is_paid:!1,message:"",payment_method:"",products:[],total:null,user:{address:"",email:"",name:"",tel:""}}}},methods:{getOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/order/").concat(this.orderId);t.isLoading=!0,t.$http.get(e).then((function(e){var a=e.data,s=a.order,r=a.success;r&&(t.order=s,t.isLoading=!1)}))},payOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/pay/").concat(this.orderId);t.isLoading=!0,t.$http.post(e).then((function(e){var a=e.data,s=a.message,r=a.success;r&&(t.$bus.$emit("message:push",s,"success"),t.getOrder())}))}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder()}},Oe=Ie,Me=Object(k["a"])(Oe,$e,Le,!1,null,null,null),je=Me.exports;o["default"].use($["a"]);var Ne=[{path:"*",redirect:"login"},{path:"/login",name:"Login",component:Y,meta:{requiresAuth:!1,title:"登入｜四分之一蛋糕工作室"}},{path:"/cart",name:"Cart",component:tt,meta:{requiresAuth:!1,title:"購物車｜四分之一蛋糕工作室"}},{path:"/",name:"About",component:Mt,meta:{requiresAuth:!1,title:"首頁｜四分之一蛋糕工作室"}},{path:"/shop",name:"Main",component:bt,meta:{requiresAuth:!1,title:"商品專區｜四分之一蛋糕工作室"}},{path:"/product/:productName",name:"Product",component:qt,meta:{requiresAuth:!1,title:"商品名｜四分之一蛋糕工作室"}},{path:"/admin",name:"Dashboard",component:te,meta:{requiresAuth:!0,title:"主控台｜四分之一蛋糕工作室"},children:[{path:"products",name:"Products",component:ie,meta:{requiresAuth:!0,title:"主控台｜四分之一蛋糕工作室"}},{path:"orders",name:"Orders",component:me,meta:{requiresAuth:!0,title:"主控台｜四分之一蛋糕工作室"}},{path:"coupons",name:"Coupons",component:Ce,meta:{requiresAuth:!0,title:"主控台｜四分之一蛋糕工作室"}},{path:"simulation",name:"Simulation",component:we,meta:{requiresAuth:!0,title:"主控台｜四分之一蛋糕工作室"}},{path:"customer_checkout/:orderId",name:"CustomerCheckout",component:je,meta:{requiresAuth:!0,title:"主控台｜四分之一蛋糕工作室"}}]}],De=new $["a"]({mode:"hash",base:I.a.publicPath,routes:Ne}),Ee=De,Se=(a("4fad"),a("d3b7"),a("07ac"),a("ddb0"),a("3835")),qe=(a("96cf"),a("1da1")),Ae=a("2f62");o["default"].use(Ae["a"]),o["default"].use(l.a,n.a);var Ve=new Ae["a"].Store({state:{products:{},count:0,cartDataFromAjax:{carts:[],total:0,final_total:0},cartsInVuex:{},isLoading:!1,isLogin:!1},mutations:{updateQty:function(t,e){var a=e.id,s=e.val,o={};o[a]=parseInt(s),delete t.cartsInVuex[a],t.cartsInVuex=Object(r["a"])(Object(r["a"])({},t.cartsInVuex),o)},setProducts:function(t,e){t.products=e},setisLogin:function(t,e){t.isLogin=e},setIsLoading:function(t,e){t.isLoading=e},setCartDataFromAjaxData:function(t,e){t.cartDataFromAjax=e},setCartsInVuexData:function(t,e){var a=e.productId,s=e.qty,o={};-1===Object.keys(t.cartsInVuex).indexOf(a)?(o[a]=parseInt(s),t.cartsInVuex=Object(r["a"])(Object(r["a"])({},t.cartsInVuex),o)):(o[a]=t.cartsInVuex[a]+parseInt(s),t.cartsInVuex=Object(r["a"])(Object(r["a"])({},t.cartsInVuex),o))},clearCartsInVuexData:function(t){t.cartsInVuex={}},deleteProductInVuexCarts:function(t,e){var a=t.cartsInVuex;t.cartDataFromAjax.carts.forEach((function(t){t.id===e.id&&delete a[t.product_id]})),t.cartsInVuex=Object(r["a"])({},a)}},getters:{cartsInVuexLength:function(t){var e=0;return Object.values(t.cartsInVuex).forEach((function(t){e+=t})),e}},actions:{getCart:function(t,e){var a=t.commit,s=(t.state,e.loadingEffect);return new Promise((function(t,e){var r="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/cart");s&&a("setIsLoading",!0),n.a.get(r).then((function(e){var r=e.data,o=r.success,i=r.data;o&&(a("setCartDataFromAjaxData",i),s&&a("setIsLoading",!1),t())}))}))},addCart:function(t,e){var a=t.commit,s=e.productId,r=e.qty,o=e.loadingEffect;return new Promise((function(t,e){if(!(r<1)){var i={data:{product_id:s,qty:r}},c="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/cart");o&&a("setIsLoading",!0),n.a.post(c,i).then((function(e){var s=e.data.success;s&&(o&&a("setIsLoading",!1),t())}))}}))},delCart:function(t,e){var a=t.commit,s=e.cartId,r=e.loadingEffect;return new Promise((function(t,e){var o="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/cart/").concat(s);r&&a("setIsLoading",!0),n.a.delete(o).then((function(e){var s=e.data.success;s&&(r&&a("setIsLoading",!1),t())}))}))},setCart:function(t){return Object(qe["a"])(regeneratorRuntime.mark((function e(){var a,s,r,o,i,n,c,l,d,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dispatch,s=t.commit,r=t.state,s("setIsLoading",!0),e.next=4,a("getCart",{loadingEffect:!1});case 4:e.t0=regeneratorRuntime.keys(r.cartDataFromAjax.carts);case 5:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,i=r.cartDataFromAjax.carts[o].id,e.next=10,a("delCart",{cartId:i,loadingEffect:!1});case 10:e.next=5;break;case 12:n=0,c=Object.entries(r.cartsInVuex);case 13:if(!(n<c.length)){e.next=20;break}return l=Object(Se["a"])(c[n],2),d=l[0],u=l[1],e.next=17,a("addCart",{productId:d,qty:u,loadingEffect:!1});case 17:n++,e.next=13;break;case 20:return e.next=22,a("getCart",{loadingEffect:!1});case 22:s("setIsLoading",!1);case 23:case"end":return e.stop()}}),e)})))()},logout:function(t){var e=t.commit;t.state;e("setIsLoading",!0);var a="".concat("https://vue-course-api.hexschool.io","/logout");n.a.post(a).then((function(t){var a=t.data,s=a.success;a.data;s&&(e("setisLogin",!1),e("setIsLoading",!1))}))},getProducts:function(t,e){var a=t.commit,s=(t.state,e.loadingEffect);return new Promise((function(t,e){var o="".concat("https://vue-course-api.hexschool.io","/api/").concat("cakery","/products/all");s&&a("setIsLoading",!0),n.a.get(o).then((function(e){var o=e.data,i=o.success,n=o.products;if(i){var c={},l={};n.forEach((function(t){l[t.id]=t,c=Object(r["a"])({},l)})),a("setProducts",c),s&&a("setIsLoading",!1),t()}}))}))}}}),Te=Ve;o["default"].prototype.$bus=new o["default"];a("b680");var Ue=function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,(function(t,e,a){var s=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return s})))};o["default"].config.productionTip=!1,o["default"].use(l.a,n.a),o["default"].use(f.a),o["default"].use(b.a),n.a.defaults.withCredentials=!0,o["default"].component("Loading",u.a),o["default"].filter("currency",Ue),o["default"].component("ValidationProvider",p["b"]),o["default"].component("ValidationObserver",p["a"]),Object(p["d"])("zhTW",v),Object(p["c"])("email",m["a"]),Object(p["c"])("required",Object(r["a"])(Object(r["a"])({},m["c"]),{},{message:"此欄位不得為空"})),Object(p["c"])("numeric",Object(r["a"])(Object(r["a"])({},m["b"]),{},{message:"此欄位只能輸入數字"})),Object(p["c"])("characters",{validate:function(t,e){var a=e.length;return t.length<=parseInt(a)},params:["length"],message:"此欄位輸入長度不得超過 {length}"}),new o["default"]({router:Ee,store:Te,render:function(t){return t(w)}}).$mount("#app"),Ee.beforeEach((function(t,e,a){var s=t.meta,r=s.requiresAuth,o=s.title;if(o&&(document.title=o),r){var i="".concat("https://vue-course-api.hexschool.io","/api/user/check");n.a.post(i).then((function(t){var e=t.data.success;e?a():a({path:"/login"})}))}else a()}))},"5c0b":function(t,e,a){"use strict";var s=a("9c0c"),r=a.n(s);r.a},"5f35":function(t,e,a){t.exports={publicPath:"/vueECommercePractice/",pages:{index:{entry:"src/main.js",title:"首頁｜四分之一蛋糕工作室"}}}},"6c6b":function(t,e,a){"use strict";var s=a("33d7"),r=a.n(s);r.a},7320:function(t,e,a){"use strict";var s=a("7c49"),r=a.n(s);r.a},7930:function(t,e,a){"use strict";var s=a("d8b1"),r=a.n(s);r.a},"7c49":function(t,e,a){},"82d5":function(t,e,a){"use strict";var s=a("dccc"),r=a.n(s);r.a},"82d6":function(t,e,a){},"9c0c":function(t,e,a){},b485:function(t,e,a){},baec:function(t,e,a){"use strict";var s=a("3381"),r=a.n(s);r.a},d8b1:function(t,e,a){},dccc:function(t,e,a){},f919:function(t,e,a){}});
//# sourceMappingURL=index.8b08fc6a.js.map